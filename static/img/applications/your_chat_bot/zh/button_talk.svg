<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="689px" preserveAspectRatio="none" style="width:779px;height:689px;background:#FFFFFF;" version="1.1" viewBox="0 0 779 689" width="779px" zoomAndPan="magnify"><defs><filter height="300%" id="fd4vqfqvo2crg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="677.5859" style="stroke:#A80036;stroke-width:1.0;" width="374.5" x="76.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62" x="232.75" y="18.0669">chat bot</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="88.2969" y2="597.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="112.5" x2="112.5" y1="88.2969" y2="597.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="240.5" x2="240.5" y1="88.2969" y2="597.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="414" x2="414" y1="88.2969" y2="597.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="570.5" x2="570.5" y1="88.2969" y2="597.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="84.9951">user</text><ellipse cx="23.5" cy="15" fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,23 L23.5,50 M10.5,31 L36.5,31 M23.5,50 L10.5,65 M23.5,50 L36.5,65 " fill="none" filter="url(#fd4vqfqvo2crg)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="609.2842">user</text><ellipse cx="23.5" cy="622.5859" fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,630.5859 L23.5,657.5859 M10.5,638.5859 L36.5,638.5859 M23.5,657.5859 L10.5,672.5859 M23.5,657.5859 L36.5,672.5859 " fill="none" filter="url(#fd4vqfqvo2crg)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="60" x="80.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="87.5" y="72.9951">button</text><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="60" x="80.5" y="596.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="87.5" y="616.2842">button</text><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="70" x="203.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="210.5" y="72.9951">ai_audio</text><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="70" x="203.5" y="596.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="210.5" y="616.2842">ai_audio</text><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="382" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="389" y="72.9951">display</text><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="382" y="596.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="389" y="616.2842">display</text><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="52" x="542.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="549.5" y="72.9951">cloud</text><rect fill="#FEFECE" filter="url(#fd4vqfqvo2crg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="52" x="542.5" y="596.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="549.5" y="616.2842">cloud</text><polygon fill="#A80036" points="100.5,115.4297,110.5,119.4297,100.5,123.4297,104.5,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="106.5" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="30.5" y="114.3638">按一下按键</text><line style="stroke:#A80036;stroke-width:1.0;" x1="112.5" x2="154.5" y1="148.5625" y2="148.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="154.5" x2="154.5" y1="148.5625" y2="161.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="113.5" x2="154.5" y1="161.5625" y2="161.5625"/><polygon fill="#A80036" points="123.5,157.5625,113.5,161.5625,123.5,165.5625,119.5,161.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="119.5" y="143.4966">检测到短按</text><polygon fill="#A80036" points="228.5,186.6953,238.5,190.6953,228.5,194.6953,232.5,190.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="112.5" x2="234.5" y1="190.6953" y2="190.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="119.5" y="185.6294">进入检测人声状态</text><polygon fill="#A80036" points="402.5,215.8281,412.5,219.8281,402.5,223.8281,406.5,219.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="240.5" x2="408.5" y1="219.8281" y2="219.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="247.5" y="214.7622">显示 “ 聆听中 ”</text><polygon fill="#A80036" points="228.5,244.9609,238.5,248.9609,228.5,252.9609,232.5,248.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="234.5" y1="248.9609" y2="248.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="30.5" y="243.895">语音输入</text><line style="stroke:#A80036;stroke-width:1.0;" x1="240.5" x2="282.5" y1="278.0938" y2="278.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="282.5" x2="282.5" y1="278.0938" y2="291.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="282.5" y1="291.0938" y2="291.0938"/><polygon fill="#A80036" points="251.5,287.0938,241.5,291.0938,251.5,295.0938,247.5,291.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="247.5" y="273.0278">检测有人声</text><polygon fill="#A80036" points="558.5,316.2266,568.5,320.2266,558.5,324.2266,562.5,320.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="240.5" x2="564.5" y1="320.2266" y2="320.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="247.5" y="315.1606">将语音数据上报到云端</text><polygon fill="#A80036" points="228.5,345.3594,238.5,349.3594,228.5,353.3594,232.5,349.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="234.5" y1="349.3594" y2="349.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="30.5" y="344.2935">结束语音输入</text><polygon fill="#A80036" points="558.5,374.4922,568.5,378.4922,558.5,382.4922,562.5,378.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="240.5" x2="564.5" y1="378.4922" y2="378.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="247.5" y="373.4263">结束上报，并告知云端数据上报已完成</text><polygon fill="#A80036" points="251.5,403.625,241.5,407.625,251.5,411.625,247.5,407.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="245.5" x2="569.5" y1="407.625" y2="407.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="257.5" y="402.5591">将语音转成文本下发</text><line style="stroke:#A80036;stroke-width:1.0;" x1="570.5" x2="612.5" y1="436.7578" y2="436.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="612.5" x2="612.5" y1="436.7578" y2="449.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="571.5" x2="612.5" y1="449.7578" y2="449.7578"/><polygon fill="#A80036" points="581.5,445.7578,571.5,449.7578,581.5,453.7578,577.5,449.7578" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="577.5" y="431.6919">根据语音内容通过大模型生成回答</text><polygon fill="#A80036" points="402.5,474.8906,412.5,478.8906,402.5,482.8906,406.5,478.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="240.5" x2="408.5" y1="478.8906" y2="478.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="247.5" y="473.8247">将文本信息显示至屏幕</text><polygon fill="#A80036" points="251.5,504.0234,241.5,508.0234,251.5,512.0234,247.5,508.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="245.5" x2="569.5" y1="508.0234" y2="508.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="257.5" y="502.9575">将 AI 生成的内容（文字，语音，表情等）下发给设备</text><line style="stroke:#A80036;stroke-width:1.0;" x1="240.5" x2="282.5" y1="537.1563" y2="537.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="282.5" x2="282.5" y1="537.1563" y2="550.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="282.5" y1="550.1563" y2="550.1563"/><polygon fill="#A80036" points="251.5,546.1563,241.5,550.1563,251.5,554.1563,247.5,550.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="247.5" y="532.0903">播放语音</text><polygon fill="#A80036" points="402.5,575.2891,412.5,579.2891,402.5,583.2891,406.5,579.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="240.5" x2="408.5" y1="579.2891" y2="579.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="247.5" y="574.2231">显示 AI 文本，表情等信息</text><!--MD5=[b0b7da0f5d2ca4e916b7e056bbdc5765]
@startuml
actor user
box "chat bot"
participant button
participant ai_audio
participant display
end box
user -> button: 按一下按键
button -> button:检测到短按
button -> ai_audio:进入检测人声状态
ai_audio->display:显示 “ 聆听中 ”
user -> ai_audio:语音输入
ai_audio -> ai_audio: 检测有人声
ai_audio -> cloud: 将语音数据上报到云端
user -> ai_audio:结束语音输入
ai_audio  -> cloud: 结束上报，并告知云端数据上报已完成
cloud -> ai_audio: 将语音转成文本下发
cloud -> cloud:根据语音内容通过大模型生成回答
ai_audio -> display: 将文本信息显示至屏幕
cloud -> ai_audio: 将 AI 生成的内容（文字，语音，表情等）下发给设备
ai_audio->ai_audio:播放语音
ai_audio->display: 显示 AI 文本，表情等信息
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>