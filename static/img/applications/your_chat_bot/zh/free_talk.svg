<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="754px" preserveAspectRatio="none" style="width:664px;height:754px;background:#FFFFFF;" version="1.1" viewBox="0 0 664 754" width="664px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pintkiombdbg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="742.7188" style="stroke:#A80036;stroke-width:1.0;" width="307.5" x="84.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62" x="207.25" y="18.0669">chat bot</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="88.2969" y2="662.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="125.5" x2="125.5" y1="88.2969" y2="662.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="355" x2="355" y1="88.2969" y2="662.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="455.5" x2="455.5" y1="88.2969" y2="662.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="84.9951">user</text><ellipse cx="23.5" cy="15" fill="#FEFECE" filter="url(#f1pintkiombdbg)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,23 L23.5,50 M10.5,31 L36.5,31 M23.5,50 L10.5,65 M23.5,50 L36.5,65 " fill="none" filter="url(#f1pintkiombdbg)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="674.417">user</text><ellipse cx="23.5" cy="687.7188" fill="#FEFECE" filter="url(#f1pintkiombdbg)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M23.5,695.7188 L23.5,722.7188 M10.5,703.7188 L36.5,703.7188 M23.5,722.7188 L10.5,737.7188 M23.5,722.7188 L36.5,737.7188 " fill="none" filter="url(#f1pintkiombdbg)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1pintkiombdbg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="70" x="88.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="95.5" y="72.9951">ai_audio</text><rect fill="#FEFECE" filter="url(#f1pintkiombdbg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="70" x="88.5" y="661.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="95.5" y="681.417">ai_audio</text><rect fill="#FEFECE" filter="url(#f1pintkiombdbg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="323" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="330" y="72.9951">display</text><rect fill="#FEFECE" filter="url(#f1pintkiombdbg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="61" x="323" y="661.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="330" y="681.417">display</text><rect fill="#FEFECE" filter="url(#f1pintkiombdbg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="52" x="427.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="434.5" y="72.9951">cloud</text><rect fill="#FEFECE" filter="url(#f1pintkiombdbg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="52" x="427.5" y="661.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="434.5" y="681.417">cloud</text><polygon fill="#A80036" points="113.5,115.4297,123.5,119.4297,113.5,123.4297,117.5,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="119.5" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="30.5" y="114.3638">说出唤醒词</text><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="167.5" y1="148.5625" y2="148.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="167.5" x2="167.5" y1="148.5625" y2="161.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="167.5" y1="161.5625" y2="161.5625"/><polygon fill="#A80036" points="136.5,157.5625,126.5,161.5625,136.5,165.5625,132.5,161.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="132.5" y="143.4966">检测到唤醒词，播放提示音, 检测人声</text><polygon fill="#A80036" points="113.5,186.6953,123.5,190.6953,113.5,194.6953,117.5,190.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="119.5" y1="190.6953" y2="190.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="30.5" y="185.6294">语音输入</text><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="167.5" y1="219.8281" y2="219.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="167.5" x2="167.5" y1="219.8281" y2="232.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="167.5" y1="232.8281" y2="232.8281"/><polygon fill="#A80036" points="136.5,228.8281,126.5,232.8281,136.5,236.8281,132.5,232.8281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="132.5" y="214.7622">检测有人声</text><polygon fill="#A80036" points="443.5,257.9609,453.5,261.9609,443.5,265.9609,447.5,261.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="449.5" y1="261.9609" y2="261.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="132.5" y="256.895">将语音数据上报到云端</text><polygon fill="#A80036" points="113.5,287.0938,123.5,291.0938,113.5,295.0938,117.5,291.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="23.5" x2="119.5" y1="291.0938" y2="291.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="30.5" y="286.0278">结束语音输入</text><polygon fill="#A80036" points="443.5,316.2266,453.5,320.2266,443.5,324.2266,447.5,320.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="449.5" y1="320.2266" y2="320.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="132.5" y="315.1606">结束上报，并告知云端数据上报已完成</text><polygon fill="#A80036" points="136.5,345.3594,126.5,349.3594,136.5,353.3594,132.5,349.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="130.5" x2="454.5" y1="349.3594" y2="349.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="142.5" y="344.2935">将语音转成文本下发</text><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="497.5" y1="378.4922" y2="378.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="497.5" x2="497.5" y1="378.4922" y2="391.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="456.5" x2="497.5" y1="391.4922" y2="391.4922"/><polygon fill="#A80036" points="466.5,387.4922,456.5,391.4922,466.5,395.4922,462.5,391.4922" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="462.5" y="373.4263">根据语音内容通过大模型生成回答</text><polygon fill="#A80036" points="343.5,416.625,353.5,420.625,343.5,424.625,347.5,420.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="349.5" y1="420.625" y2="420.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="132.5" y="415.5591">将文本信息显示至屏幕</text><polygon fill="#A80036" points="136.5,445.7578,126.5,449.7578,136.5,453.7578,132.5,449.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="130.5" x2="454.5" y1="449.7578" y2="449.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="142.5" y="444.6919">将 AI 生成的内容（文字，语音，表情等）下发给设备</text><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="167.5" y1="478.8906" y2="478.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="167.5" x2="167.5" y1="478.8906" y2="491.8906"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="167.5" y1="491.8906" y2="491.8906"/><polygon fill="#A80036" points="136.5,487.8906,126.5,491.8906,136.5,495.8906,132.5,491.8906" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="132.5" y="473.8247">播放语音</text><polygon fill="#A80036" points="343.5,517.0234,353.5,521.0234,343.5,525.0234,347.5,521.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="349.5" y1="521.0234" y2="521.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="132.5" y="515.9575">显示 AI 文本，表情等信息</text><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="167.5" y1="550.1563" y2="550.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="167.5" x2="167.5" y1="550.1563" y2="563.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="167.5" y1="563.1563" y2="563.1563"/><polygon fill="#A80036" points="136.5,559.1563,126.5,563.1563,136.5,567.1563,132.5,563.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="132.5" y="545.0903">继续检测人声</text><path d="M48,576.1563 L48,601.1563 L198,601.1563 L198,586.1563 L188,576.1563 L48,576.1563 " fill="#FBFB77" filter="url(#f1pintkiombdbg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M188,576.1563 L188,586.1563 L198,586.1563 L188,576.1563 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="54" y="593.2231">30S内都没检测到人声</text><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="167.5" y1="631.4219" y2="631.4219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="167.5" x2="167.5" y1="631.4219" y2="644.4219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="167.5" y1="644.4219" y2="644.4219"/><polygon fill="#A80036" points="136.5,640.4219,126.5,644.4219,136.5,648.4219,132.5,644.4219" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="132.5" y="626.356">检测唤醒词</text><!--MD5=[68482ca78e0cc48719502cf40f469b60]
@startuml
actor user
box "chat bot"
participant ai_audio
participant display
end box
user-> ai_audio: 说出唤醒词
ai_audio -> ai_audio:检测到唤醒词，播放提示音, 检测人声
user -> ai_audio:语音输入
ai_audio -> ai_audio: 检测有人声
ai_audio -> cloud: 将语音数据上报到云端
user -> ai_audio:结束语音输入
ai_audio  -> cloud: 结束上报，并告知云端数据上报已完成
cloud -> ai_audio: 将语音转成文本下发
cloud -> cloud:根据语音内容通过大模型生成回答
ai_audio -> display: 将文本信息显示至屏幕
cloud -> ai_audio: 将 AI 生成的内容（文字，语音，表情等）下发给设备
ai_audio->ai_audio:播放语音
ai_audio->display: 显示 AI 文本，表情等信息
ai_audio->ai_audio:继续检测人声
note over ai_audio :30S内都没检测到人声
ai_audio->ai_audio:检测唤醒词
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>