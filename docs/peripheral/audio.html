<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-peripheral/audio" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Audio Driver | TuyaOpen</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tuyaopen.io/img/home/tuyaopen-logo-social-preview.png"><meta data-rh="true" name="twitter:image" content="https://tuyaopen.io/img/home/tuyaopen-logo-social-preview.png"><meta data-rh="true" property="og:url" content="https://tuyaopen.io/docs/peripheral/audio"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Audio Driver | TuyaOpen"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tuyaopen.io/docs/peripheral/audio"><link data-rh="true" rel="alternate" href="https://tuyaopen.io/docs/peripheral/audio" hreflang="en"><link data-rh="true" rel="alternate" href="https://tuyaopen.io/zh/docs/peripheral/audio" hreflang="zh"><link data-rh="true" rel="alternate" href="https://tuyaopen.io/docs/peripheral/audio" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NT1L7IWROF-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Audio Driver","item":"https://tuyaopen.io/docs/peripheral/audio"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="TuyaOpen RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="TuyaOpen Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3M0J54E8XF"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-3M0J54E8XF",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="TuyaOpen" href="/opensearch.xml">

<link rel="preconnect" href="https://www.clarity.ms">
<script>!function(t,e,n,c,r,s,a){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(s=e.createElement(c)).async=1,s.src="https://www.clarity.ms/tag/lggqck9srz",(a=e.getElementsByTagName(c)[0]).parentNode.insertBefore(s,a)}(window,document,"clarity","script")</script>


<meta name="algolia-site-verification" content="6232065417750C16"><link rel="stylesheet" href="/assets/css/styles.1342ef69.css">
<script src="/assets/js/runtime~main.907b92c3.js" defer="defer"></script>
<script src="/assets/js/main.d54ec3bd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/home/tuyaopen-logo-simple-dark.png" alt="TuyaOpen" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/home/tuyaopen-logo-simple-light.png" alt="TuyaOpen" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">TuyaOpen</b></a><a class="navbar__item navbar__link" href="/docs/about-tuyaopen">Documentation</a><a class="navbar__item navbar__link" href="/pricing">Service</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Tools</a><ul class="dropdown__menu"><li><a href="https://tuyaopen.ai/tools" target="_blank" rel="noopener noreferrer" class="dropdown__link">Web Serial/Flashing Tools<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/peripheral/audio" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/peripheral/audio" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">简体中文</a></li></ul></div><a href="https://github.com/tuya/TuyaOpen" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/home/tuyaopen-logo-simple-dark.png" alt="TuyaOpen" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/home/tuyaopen-logo-simple-light.png" alt="TuyaOpen" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>TuyaOpen</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/about-tuyaopen">About TuyaOpen</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/quick_start/unboxing">Getting Started</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick_start/unboxing">Unboxing Use</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick_start/enviroment-setup">Environment Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick_start/project-compilation">Project Compilation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick_start/firmware-burning">Firmware Burning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick_start/equipment-authorization">Equipment Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/quick_start/device-network-configuration">Device Network Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/advanced_use/terminologies">Advanced Use</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/hardware-specific">Hardware Guides</a><button aria-label="Collapse sidebar category &#x27;Hardware Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" tabindex="0" href="/docs/hardware-specific/t5-ai-board/overview-t5-ai-board">T5-AI Board DevKit</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/hardware-specific/t5-ai-board/overview-t5-ai-board">Overview T5-AI Devkit</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/applications/ai-components/ai-audio-asr-impl">Application Demo</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/peripheral/support_peripheral_list">Peripherals</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/peripheral/support_peripheral_list">Peripheral Driver List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/peripheral/display">Display Driver</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/peripheral/audio">Audio Driver</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/peripheral/button">Button Driver</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/new_hardware/new-platform">New Project</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tkl-api/tkl_mutex">TKL APIs</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faqs">FAQs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/contribute/contribute-guide">Contribute</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Peripherals</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Audio Driver</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Audio Driver</h1></header>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>The <a href="https://github.com/tuya/TuyaOpen/tree/master/src/peripherals/audio_codecs" target="_blank" rel="noopener noreferrer">Audio Driver</a> is a core component in TuyaOpen used for handling audio input and output. It provides a unified interface to manage different types of audio devices, such as microphones and speakers. Through this driver, applications can easily perform audio capture, playback, and configuration without needing to be concerned with the specific implementation details of the underlying hardware.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prerequisite-concepts">Prerequisite Concepts<a href="#prerequisite-concepts" class="hash-link" aria-label="Direct link to Prerequisite Concepts" title="Direct link to Prerequisite Concepts">​</a></h2>
<table><thead><tr><th>Term</th><th style="text-align:left">Explanation</th></tr></thead><tbody><tr><td>MIC(Microphone)</td><td style="text-align:left">A microphone is a transducer that converts sound signals into electrical signals.</td></tr><tr><td>SPK(Speaker)</td><td style="text-align:left">A speaker is a device that converts electrical signals into sound signals.</td></tr><tr><td>CODEC(Codec)</td><td style="text-align:left">A CODEC typically consists of two main parts:<br><strong>Encoder</strong> Converts raw data (like uncompressed audio or video) into another format for easier storage or transmission.<br><strong>Decoder</strong> Restores the encoded data to its original format for viewing or playback.</td></tr><tr><td>PA(Power Amplifier)</td><td style="text-align:left">A PA is an electronic device whose main function is to amplify the power of a weak input signal so that it can drive a larger load, such as a speaker or antenna.</td></tr><tr><td>PCM</td><td style="text-align:left">PCM is a method of encoding analog audio signals into digital signals. The raw PCM data (often called a PCM stream or raw data) is uncompressed and needs to be decoded before it can be played.</td></tr><tr><td>PDM</td><td style="text-align:left">PDM is also a digital audio encoding method, characterized by having only one bit of data, using the density of pulses to represent the intensity of the analog signal.</td></tr><tr><td>I2C</td><td style="text-align:left">Primarily used for control signals, configuration parameters, and small amounts of data transfer between chips, using two lines for communication: SDA (Serial Data) and SCL (Serial Clock).</td></tr><tr><td>I2S</td><td style="text-align:left">Specifically used for the transmission of digital audio data, using at least three lines, including SCK (Serial Clock), WS (Word Select), and SD (Serial Data).</td></tr><tr><td>ADC</td><td style="text-align:left">Converts analog signals (such as sound, light, temperature, etc.) into digital signals for processing, storage, and transmission by computers or other digital systems. The <code>AD</code> conversion process typically includes three steps: sampling, quantization, and encoding (such as PCM encoding).</td></tr><tr><td>DAC</td><td style="text-align:left">Converts digital signals (from computers, MP3 players, etc.) into analog signals to drive analog devices such as speakers and displays. The <code>DA</code> conversion process typically generates a corresponding analog voltage or current output based on the value of the digital signal.</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="audio-connection-framework">Audio Connection Framework<a href="#audio-connection-framework" class="hash-link" aria-label="Direct link to Audio Connection Framework" title="Direct link to Audio Connection Framework">​</a></h2>
<p>The audio connection framework varies depending on the main control chip. For example, the <code>T5AI</code> has built-in ADC and DAC interfaces and can implement an audio system without a CODEC chip. In contrast, the <code>ESP32-S3</code> does not support DAC and requires an external CODEC chip to build an audio system.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hardware-framework-for-audio-devices-with-built-in-codec">Hardware Framework for Audio Devices with Built-in CODEC<a href="#hardware-framework-for-audio-devices-with-built-in-codec" class="hash-link" aria-label="Direct link to Hardware Framework for Audio Devices with Built-in CODEC" title="Direct link to Hardware Framework for Audio Devices with Built-in CODEC">​</a></h3>
<!-- -->
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hardware-framework-for-audio-devices-with-external-codec">Hardware Framework for Audio Devices with External CODEC<a href="#hardware-framework-for-audio-devices-with-external-codec" class="hash-link" aria-label="Direct link to Hardware Framework for Audio Devices with External CODEC" title="Direct link to Hardware Framework for Audio Devices with External CODEC">​</a></h3>
<!-- -->
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="functional-modules">Functional Modules<a href="#functional-modules" class="hash-link" aria-label="Direct link to Functional Modules" title="Direct link to Functional Modules">​</a></h2>
<p>TuyaOpen aims to provide a standardized, platform-independent audio solution with a core design philosophy of layered decoupling. It separates the application layer&#x27;s audio requirements from the underlying specific hardware implementation.</p>
<ul>
<li><strong>For Application Developers</strong>: Regardless of whether the underlying chip is a T5AI or another audio codec, the application layer only needs to call a unified, standardized set of APIs (the tdl_audio_xxx series of functions), such as tdl_audio_open, tdl_audio_play, etc. This greatly reduces the complexity of application development and improves code portability.</li>
<li><strong>For Driver Developers</strong>: When a new audio chip needs to be supported, one only needs to follow the standard interface defined in <code>tdl_audio_driver.h</code> to write a new TDD layer driver (similar to <code>tdd_audio.c</code>) and register it with the TDL management layer, without modifying any application layer code.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="abstract-management-module-tdl-tuya-driver-layer">Abstract Management Module: TDL (Tuya Driver Layer)<a href="#abstract-management-module-tdl-tuya-driver-layer" class="hash-link" aria-label="Direct link to Abstract Management Module: TDL (Tuya Driver Layer)" title="Direct link to Abstract Management Module: TDL (Tuya Driver Layer)">​</a></h3>
<p>This is the highest level of abstraction, providing a unified audio service interface to the application layer.</p>
<ul>
<li>tdl_audio_manage.c/h: Implements the core of audio driver management. It maintains a linked list for registering and managing different types (or different platforms) of audio device drivers. Applications use audio functions by calling tdl_audio_find, tdl_audio_open, etc., without needing to know the underlying implementation details.</li>
<li>tdl_audio_driver.h: Defines the &quot;standardized interface&quot; (TDD_AUDIO_INTFS_T) that all audio device drivers must adhere to, including function pointers for open, play, config, close, etc. This ensures that tdl_audio_manage can uniformly call any underlying driver that conforms to this standard.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="instantiation-and-registration-module-tdd-tuya-device-driver">Instantiation and Registration Module: TDD (Tuya Device Driver)<a href="#instantiation-and-registration-module-tdd-tuya-device-driver" class="hash-link" aria-label="Direct link to Instantiation and Registration Module: TDD (Tuya Device Driver)" title="Direct link to Instantiation and Registration Module: TDD (Tuya Device Driver)">​</a></h3>
<p>This is the middle layer of the driver, representing the specific implementation for a particular hardware platform.</p>
<ul>
<li>tdd_audio.c/h: Implements the audio driver for different platforms. It is responsible for connecting the upper and lower layers, implementing the TDD_AUDIO_INTFS_T standard interface defined by TDL, and calling the TKL layer or the original manufacturer&#x27;s hardware abstraction interface to control the actual hardware. The tdd_audio_register function registers this driver&#x27;s implementation (function pointers) with the TDL layer.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="feature-introduction">Feature Introduction<a href="#feature-introduction" class="hash-link" aria-label="Direct link to Feature Introduction" title="Direct link to Feature Introduction">​</a></h2>
<p><strong>a. Audio Input (Microphone Capture)</strong></p>
<ul>
<li><strong>Start and Stop</strong>: Audio capture can be started and stopped using tdl_audio_open and tdl_audio_close.</li>
<li><strong>Asynchronous Data Callback</strong>: The driver uses a callback mechanism (TDL_AUDIO_MIC_CB) to push the captured audio data to the application layer frame by frame in real-time. The application layer does not need to actively read the data but passively receives it, which is more efficient.</li>
<li><strong>Status Notification</strong>: The callback function not only transmits audio data but also the current status (TDL_AUDIO_STATUS_E), for example, it can notify the application of &quot;Voice Activity Detected (VAD_START)&quot; or &quot;Voice Activity Ended (VAD_END)&quot;.</li>
</ul>
<p><strong>b. Audio Output (Speaker Playback)</strong></p>
<ul>
<li><strong>Play Audio Stream</strong>: The application layer can send audio data blocks in formats like PCM to the driver for playback by calling the tdl_audio_play function.</li>
<li><strong>Control Playback</strong>: The tdl_audio_play_stop function can be called at any time to clear the playback buffer and immediately stop the currently playing audio.</li>
</ul>
<p><strong>c. Volume Control</strong></p>
<ul>
<li><strong>Set Volume</strong>: The playback volume of the speaker can be dynamically adjusted at runtime (range 0-100) using the tdl_audio_volume_set function.</li>
</ul>
<p><strong>d. Echo Cancellation (AEC) Support</strong></p>
<ul>
<li><strong>Configurable AEC</strong>: When initializing the audio device, you can choose to enable or disable the acoustic echo cancellation function (requires hardware support) through a configuration option (aec_enable).</li>
<li><strong>Improved Call Experience</strong>: AEC is a key technology for achieving full-duplex voice calls (i.e., speaking and listening at the same time without producing echo). This driver has built-in support for AEC, enabling it to meet the needs of advanced applications such as voice intercom and video calls.</li>
</ul>
<p><strong>e. Extensible Driver Management</strong></p>
<ul>
<li><strong>Dynamic Registration and Discovery</strong>: The system can register multiple different audio drivers simultaneously (e.g., an onboard Codec, an external USB sound card).</li>
<li><strong>Find by Name</strong>: The application layer can find and obtain a handle to a specific audio device (tdl_audio_find) using a string name (e.g., &quot;audio_codec&quot;), enabling flexible device selection.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="supported-peripherals-list">Supported Peripherals List<a href="#supported-peripherals-list" class="hash-link" aria-label="Direct link to Supported Peripherals List" title="Direct link to Supported Peripherals List">​</a></h2>
<table><thead><tr><th style="text-align:center">CODEC</th><th style="text-align:center">Recording</th><th style="text-align:center">Playback</th></tr></thead><tbody><tr><td style="text-align:center">ES8311</td><td style="text-align:center">✅</td><td style="text-align:center">✅</td></tr><tr><td style="text-align:center">ES8388</td><td style="text-align:center">✅</td><td style="text-align:center">✅</td></tr><tr><td style="text-align:center">ES8389</td><td style="text-align:center">✅</td><td style="text-align:center">✅</td></tr><tr><td style="text-align:center">···</td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to Workflow" title="Direct link to Workflow">​</a></h2>
<p>Taking T5AI as an example, this section introduces the workflow of the audio driver framework.</p>
<!-- -->
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="development-guide">Development Guide<a href="#development-guide" class="hash-link" aria-label="Direct link to Development Guide" title="Direct link to Development Guide">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="kconfig-configuration">Kconfig Configuration<a href="#kconfig-configuration" class="hash-link" aria-label="Direct link to Kconfig Configuration" title="Direct link to Kconfig Configuration">​</a></h3>
<p>To include the driver in the build, you need to check if the relevant Kconfig options are enabled before compiling. In the target project path, execute <code>tos.py config menu</code> in the terminal to view the following configuration options.</p>
<table><thead><tr><th style="text-align:left">Configuration Macro</th><th style="text-align:left">Type</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">enable audio codecs</td><td style="text-align:left">Boolean</td><td style="text-align:left">The driver code will only be compiled if this macro is enabled.</td></tr><tr><td style="text-align:left">audio support AEC</td><td style="text-align:left">Boolean</td><td style="text-align:left">Enable AEC function (requires hardware support).</td></tr><tr><td style="text-align:left">the name of audio codec</td><td style="text-align:left">String</td><td style="text-align:left">Configure the device name of the CODEC.</td></tr><tr><td style="text-align:left">the num of audio codecs</td><td style="text-align:left">Integer</td><td style="text-align:left">Configure the number of board-level CODECs.</td></tr></tbody></table>
<p></p><figure><img decoding="async" loading="lazy" alt="open_audio" src="/assets/images/open_audio-c2c194ce0d4a362f5128872aaafb961b.png" width="681" height="274" class="img_ev3q"><figcaption class="text--italic text--center" style="color:var(--ifm-color-content-secondary);font-size:0.875rem">open_audio</figcaption></figure><p></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The above configuration items must be supported in <code>src/peripherals/audio_codecs/Kconfig</code> and <code>boards/&lt;target_platform&gt;/&lt;target_board&gt;/Kconfig</code> (check the Kconfig file for your target board). If you do not find the relevant configuration items, please check the contents of these two files.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="runtime-environment">Runtime Environment<a href="#runtime-environment" class="hash-link" aria-label="Direct link to Runtime Environment" title="Direct link to Runtime Environment">​</a></h3>
<p>To run this driver, you need to first enable the <strong>main enable macro</strong> <code>&lt;ENABLE_AUDIO_CODECS&gt;</code>. There are three ways to enable this macro: <strong>Board default enabled</strong>, <strong>enabled a feature that requires the screen driver</strong>, and <strong>manually enabled</strong>.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>All the following commands need to be executed in the target application directory. Do not execute them directly in the TuyaOpen root directory or other directories, otherwise an error will be reported.</p></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="target-board-default-enabled">Target Board Default Enabled<a href="#target-board-default-enabled" class="hash-link" aria-label="Direct link to Target Board Default Enabled" title="Direct link to Target Board Default Enabled">​</a></h4>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In this case, the developer&#x27;s chosen development board has usually already registered the screen device. At this time, the source file in the target Board has already written the registration code.</p><p>For example, the TUYA_T5AI_EVB development board supports a microphone and speaker. When adapting this board, the audio device has already been registered, and the <code>boards/T5AI/TUYA_T5AI_EVB/Kconfig</code> file will also have <code>select ENABLE_AUDIO_CODECS</code>. (For specific example code and configuration, please refer to <code>boards/T5AI/TUYA_T5AI_EVB</code>).</p></div></div>
<p>This means that as long as the developer selects the corresponding target Board, the driver will be automatically enabled.</p>
<ul>
<li>
<p>Execute the command to enter the Kconfig menu</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tos.py config menu</span><br></span></code></pre></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>After executing <code>select ENABLE_XXX</code> in boards/T5AI/TUYA_T5AI_EVB/Kconfig, you cannot manually select/deselect it by executing <code>tos.py config menu</code>.</p></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="enabled-a-feature-that-requires-the-audio-driver">Enabled a feature that requires the audio driver<a href="#enabled-a-feature-that-requires-the-audio-driver" class="hash-link" aria-label="Direct link to Enabled a feature that requires the audio driver" title="Direct link to Enabled a feature that requires the audio driver">​</a></h4>
<p>If the developer selects a feature that depends on the audio driver, the enable macro for the audio driver will also be automatically enabled.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="manually-enable-the-macro">Manually enable the macro<a href="#manually-enable-the-macro" class="hash-link" aria-label="Direct link to Manually enable the macro" title="Direct link to Manually enable the macro">​</a></h4>
<ul>
<li>
<p>Execute the command to enter the Kconfig menu</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tos.py config menu</span><br></span></code></pre></div></div>
</li>
<li>
<p>Enable the driver enable macro</p>
</li>
</ul>
<p></p><figure><img decoding="async" loading="lazy" alt="open_audio" src="/assets/images/open_audio-c2c194ce0d4a362f5128872aaafb961b.png" width="681" height="274" class="img_ev3q"><figcaption class="text--italic text--center" style="color:var(--ifm-color-content-secondary);font-size:0.875rem">open_audio</figcaption></figure><p></p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-use">How to Use<a href="#how-to-use" class="hash-link" aria-label="Direct link to How to Use" title="Direct link to How to Use">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="adapting-the-audio-driver">Adapting the Audio Driver<a href="#adapting-the-audio-driver" class="hash-link" aria-label="Direct link to Adapting the Audio Driver" title="Direct link to Adapting the Audio Driver">​</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Developers can skip this step if they find a corresponding driver in <a href="https://github.com/tuya/TuyaOpen/tree/master/boards/ESP32/common/audio" target="_blank" rel="noopener noreferrer">tdd_audio</a>. If you cannot find a suitable audio driver for yourself, you can adapt the driver yourself.</p></div></div>
<ol>
<li>Create <code>tdd_audio_xxx.c/h</code> files in <code>src/peripherals/audio_codecs/tdd_audio</code>.</li>
<li><strong>Allocate memory</strong> for the device and adapt the abstract interface of the audio driver (function pointers such as open, close, play, config, etc.) according to your device.</li>
<li>Call the <strong>register common audio device node</strong> interface (tdl_audio_driver_register()).</li>
<li>For example code, please refer to the already adapted drivers.</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdd_audio_register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TDD_AUDIO_T5AI_T cfg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OPERATE_RET rt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> OPRT_OK</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TDD_AUDIO_DATA_HANDLE_T </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_hdl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TDD_AUDIO_INTFS_T intfs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* Allocate memory to the device */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _hdl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_DATA_HANDLE_T </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token function" style="color:#d73a49">tal_malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_DATA_HANDLE_T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_hdl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_DATA_HANDLE_T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    g_tdd_audio_hdl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _hdl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _hdl</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">play_volume </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">memcpy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">_hdl</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">cfg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_T5AI_T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* Register function pointers */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    intfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">open </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> __tdd_audio_open</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    intfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">play </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> __tdd_audio_play</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    intfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> __tdd_audio_config</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    intfs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> __tdd_audio_close</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">tdl_audio_driver_register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">intfs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_HANDLE_T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">_hdl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>When adapting for ESP32, you need to create new files in the <code>boards/ESP32/common/audio</code> path. The CODEC chips that have been adapted for ESP32 are also in this path.</p></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="registering-the-audio-device">Registering the Audio Device<a href="#registering-the-audio-device" class="hash-link" aria-label="Direct link to Registering the Audio Device" title="Direct link to Registering the Audio Device">​</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If the developer&#x27;s chosen target Board has already registered the audio device, they only need to select the target board in Kconfig and call the <code>board_register_hardware()</code> interface in the application. This interface has already registered the corresponding audio device.</p></div></div>
<ol>
<li>Write the registration interface according to the developer&#x27;s audio CODEC model and connection pins. It is recommended to write it in <code>board_register_hardware()</code>, the implementation path of this interface is <code>boards/&lt;target_platform&gt;/&lt;target_board&gt;/xxx.c</code>.</li>
<li>Configure the basic information of the device and call the registration interface in <code>board_register_hardware()</code>.</li>
</ol>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">__board_register_audio</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* Write your struct configuration information here */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* begin */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* end */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">TUYA_CALL_ERR_RETURN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tdd_audio_register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AUDIO_CODEC_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cfg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">board_register_hardware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">TUYA_CALL_ERR_LOG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">__board_register_audio</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> rt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="controlling-the-device">Controlling the Device<a href="#controlling-the-device" class="hash-link" aria-label="Direct link to Controlling the Device" title="Direct link to Controlling the Device">​</a></h4>
<p>Control the audio device according to the tdl layer interface provided in <code>src/peripherals/audio_codecs/tdl_audio/include/tdl_audio_manage.h</code>.</p>
<ul>
<li>Find the device handle by device name</li>
<li>Open and initialize the audio device</li>
<li>Close the audio device and release related resources</li>
<li>Dynamically adjust the audio output volume</li>
<li>Play audio data</li>
<li>Stop playing audio data</li>
</ul>
<p>For specific examples, please refer to <code>examples/multimedia/audio</code>.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="api-reference">API Reference<a href="#api-reference" class="hash-link" aria-label="Direct link to API Reference" title="Direct link to API Reference">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="audio-device-configuration-structure">Audio Device Configuration Structure<a href="#audio-device-configuration-structure" class="hash-link" aria-label="Direct link to Audio Device Configuration Structure" title="Direct link to Audio Device Configuration Structure">​</a></h3>
<p>Taking T5AI as an example, construct the TDD layer hardware configuration information structure.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Audio device configuration structure for T5AI board.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This structure contains all hardware configuration parameters for the audio device,</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * including sample rate, data bits, channels, speaker control pins, and AEC settings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> aec_enable</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TKL_AI_CHN_E ai_chn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TKL_AUDIO_SAMPLE_E sample_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TKL_AUDIO_DATABITS_E data_bits</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TKL_AUDIO_CHANNEL_E channel</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// spk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TKL_AUDIO_SAMPLE_E spk_sample_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> spk_pin</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> spk_pin_polarity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> TDD_AUDIO_T5AI_T</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="audio-driver-registration-structure">Audio Driver Registration Structure<a href="#audio-driver-registration-structure" class="hash-link" aria-label="Direct link to Audio Driver Registration Structure" title="Direct link to Audio Driver Registration Structure">​</a></h3>
<p>To register the audio driver structure, developers need to implement the corresponding function pointers according to their own audio driver.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Audio driver interface structure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This structure contains function pointers for all audio operations, providing</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * a unified interface for the audio abstract layer to call driver functions.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">OPERATE_RET</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">open</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_HANDLE_T handle</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TDL_AUDIO_MIC_CB mic_cb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">OPERATE_RET</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">play</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_HANDLE_T handle</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint8_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint32_t</span><span class="token plain"> len</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">OPERATE_RET</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_HANDLE_T handle</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TDD_AUDIO_CMD_E cmd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">OPERATE_RET</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDD_AUDIO_HANDLE_T handle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> TDD_AUDIO_INTFS_T</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="audio-device-registration-interface">Audio Device Registration Interface<a href="#audio-device-registration-interface" class="hash-link" aria-label="Direct link to Audio Device Registration Interface" title="Direct link to Audio Device Registration Interface">​</a></h3>
<p>This interface is used to register the audio device driver with the system and is the entry point of the audio driver framework. By passing in the device name and configuration parameters, the audio device is added to the management list for use by the application.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Registers an audio device driver with the audio management system.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function registers an audio device driver including device name, hardware </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * configuration parameters, and driver interface functions. After successful </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * registration, applications can find and use the audio device by name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param name Audio device name used for identification and lookup</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param cfg Audio device configuration parameters including sample rate, data bits, </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *            channels, speaker pin configuration, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns OPRT_OK on successful registration, or an appropriate error code on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdd_audio_register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TDD_AUDIO_T5AI_T cfg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="audio-driver-registration-interface">Audio Driver Registration Interface<a href="#audio-driver-registration-interface" class="hash-link" aria-label="Direct link to Audio Driver Registration Interface" title="Direct link to Audio Driver Registration Interface">​</a></h3>
<p>This interface registers the underlying audio driver interface with the abstraction layer management system, creates device nodes, and maintains the device list.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Registers audio device driver interfaces to the abstract layer management system.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function registers audio device driver interface functions to the audio abstract </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * layer management system, creates device nodes and adds them to the device management list </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * for upper layer application calls.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param name Audio device name</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param intfs Audio driver interface structure containing various operation function pointers</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns OPRT_OK on successful registration, or an appropriate error code on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdl_audio_driver_register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TDD_AUDIO_INTFS_T </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">intfs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device-find-and-management-interface">Device Find and Management Interface<a href="#device-find-and-management-interface" class="hash-link" aria-label="Direct link to Device Find and Management Interface" title="Direct link to Device Find and Management Interface">​</a></h3>
<p>This interface finds the corresponding device handle in the registered audio device list according to the device name, and is the key interface for obtaining device control.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Finds an audio device by device name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function searches for the corresponding audio device node in the registered </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * audio device list based on the device name, and returns a device handle for </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * subsequent operations.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param name Name of the audio device to find</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns audio device handle, or NULL if not found.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TDL_AUDIO_HANDLE_T </span><span class="token function" style="color:#d73a49">tdl_audio_find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device-open-interface">Device Open Interface<a href="#device-open-interface" class="hash-link" aria-label="Direct link to Device Open Interface" title="Direct link to Device Open Interface">​</a></h3>
<p>This interface opens and initializes the audio device, including hardware initialization, pin configuration, and other operations, to make the device available.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Opens and initializes an audio device.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function opens the specified audio device and initializes audio hardware </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * including ADC/DAC, I2S interface, speaker enable pins, etc. After successful </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * opening, the device enters a usable state.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param audio_hdl Audio device handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns OPRT_OK on successful opening, or an appropriate error code on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdl_audio_open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDL_AUDIO_HANDLE_T audio_hdl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="device-close-interface">Device Close Interface<a href="#device-close-interface" class="hash-link" aria-label="Direct link to Device Close Interface" title="Direct link to Device Close Interface">​</a></h3>
<p>This interface closes the audio device and releases related resources, including de-initializing the hardware and disabling pins.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Closes and deinitializes an audio device.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function closes the specified audio device and deinitializes audio hardware </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * including releasing I2S resources, disabling speaker pins, closing ADC/DAC, etc. </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * After closing, the device becomes unavailable and needs to be reopened for use.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param audio_hdl Audio device handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns OPRT_OK on successful closing, or an appropriate error code on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdl_audio_close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDL_AUDIO_HANDLE_T audio_hdl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="volume-adjustment-interface">Volume Adjustment Interface<a href="#volume-adjustment-interface" class="hash-link" aria-label="Direct link to Volume Adjustment Interface" title="Direct link to Volume Adjustment Interface">​</a></h3>
<p>This interface is used to dynamically adjust the audio output volume and control the gain of the speaker power amplifier.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Sets audio output volume.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function adjusts the output volume of the audio device, controls the gain </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * of the speaker amplifier, and implements dynamic volume adjustment functionality.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param audio_hdl Audio device handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param volume Volume value, typically ranging from 0-100</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns OPRT_OK on successful setting, or an appropriate error code on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdl_audio_volume_set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDL_AUDIO_HANDLE_T audio_hdl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint8_t</span><span class="token plain"> volume</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="audio-playback-control-interface">Audio Playback Control Interface<a href="#audio-playback-control-interface" class="hash-link" aria-label="Direct link to Audio Playback Control Interface" title="Direct link to Audio Playback Control Interface">​</a></h3>
<p>This interface is used to play audio data, outputting audio frames to the speaker through the hardware interface.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Plays audio data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function sends audio frame data to the audio device for playback. Data is </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * output to the speaker through DAC or I2S interface. Supports different audio </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * frame formats.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param audio_hdl Audio device handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param frame_data Audio frame data pointer</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param frame_size Audio frame data size</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param format Audio frame format</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns OPRT_OK on successful playback, or an appropriate error code on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdl_audio_play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDL_AUDIO_HANDLE_T audio_hdl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">frame_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">uint32_t</span><span class="token plain"> frame_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           TDL_AUDIO_FRAME_FORMAT_E format</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="audio-stop-playback-interface">Audio Stop Playback Interface<a href="#audio-stop-playback-interface" class="hash-link" aria-label="Direct link to Audio Stop Playback Interface" title="Direct link to Audio Stop Playback Interface">​</a></h3>
<p>This interface is used to stop the current audio playback, turn off the audio output, and put the device into a mute state.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @brief Stops audio playback.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This function stops the currently ongoing audio playback, closes audio output, </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * disables speaker amplifier, and puts the device into a mute state.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param audio_hdl Audio device handle</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return Returns OPRT_OK on successful stopping, or an appropriate error code on failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPERATE_RET </span><span class="token function" style="color:#d73a49">tdl_audio_play_stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TDL_AUDIO_HANDLE_T audio_hdl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/peripheral/audio.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/peripheral/display"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Display Driver</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/peripheral/button"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Button Driver</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#prerequisite-concepts" class="table-of-contents__link toc-highlight">Prerequisite Concepts</a></li><li><a href="#audio-connection-framework" class="table-of-contents__link toc-highlight">Audio Connection Framework</a><ul><li><a href="#hardware-framework-for-audio-devices-with-built-in-codec" class="table-of-contents__link toc-highlight">Hardware Framework for Audio Devices with Built-in CODEC</a></li><li><a href="#hardware-framework-for-audio-devices-with-external-codec" class="table-of-contents__link toc-highlight">Hardware Framework for Audio Devices with External CODEC</a></li></ul></li><li><a href="#functional-modules" class="table-of-contents__link toc-highlight">Functional Modules</a><ul><li><a href="#abstract-management-module-tdl-tuya-driver-layer" class="table-of-contents__link toc-highlight">Abstract Management Module: TDL (Tuya Driver Layer)</a></li><li><a href="#instantiation-and-registration-module-tdd-tuya-device-driver" class="table-of-contents__link toc-highlight">Instantiation and Registration Module: TDD (Tuya Device Driver)</a></li></ul></li><li><a href="#feature-introduction" class="table-of-contents__link toc-highlight">Feature Introduction</a></li><li><a href="#supported-peripherals-list" class="table-of-contents__link toc-highlight">Supported Peripherals List</a></li><li><a href="#workflow" class="table-of-contents__link toc-highlight">Workflow</a></li><li><a href="#development-guide" class="table-of-contents__link toc-highlight">Development Guide</a><ul><li><a href="#kconfig-configuration" class="table-of-contents__link toc-highlight">Kconfig Configuration</a></li><li><a href="#runtime-environment" class="table-of-contents__link toc-highlight">Runtime Environment</a></li><li><a href="#how-to-use" class="table-of-contents__link toc-highlight">How to Use</a></li></ul></li><li><a href="#api-reference" class="table-of-contents__link toc-highlight">API Reference</a><ul><li><a href="#audio-device-configuration-structure" class="table-of-contents__link toc-highlight">Audio Device Configuration Structure</a></li><li><a href="#audio-driver-registration-structure" class="table-of-contents__link toc-highlight">Audio Driver Registration Structure</a></li><li><a href="#audio-device-registration-interface" class="table-of-contents__link toc-highlight">Audio Device Registration Interface</a></li><li><a href="#audio-driver-registration-interface" class="table-of-contents__link toc-highlight">Audio Driver Registration Interface</a></li><li><a href="#device-find-and-management-interface" class="table-of-contents__link toc-highlight">Device Find and Management Interface</a></li><li><a href="#device-open-interface" class="table-of-contents__link toc-highlight">Device Open Interface</a></li><li><a href="#device-close-interface" class="table-of-contents__link toc-highlight">Device Close Interface</a></li><li><a href="#volume-adjustment-interface" class="table-of-contents__link toc-highlight">Volume Adjustment Interface</a></li><li><a href="#audio-playback-control-interface" class="table-of-contents__link toc-highlight">Audio Playback Control Interface</a></li><li><a href="#audio-stop-playback-interface" class="table-of-contents__link toc-highlight">Audio Stop Playback Interface</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/quick_start/unboxing">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/pricing">Service</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/hardware-specific">Hardware List</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/hardware-specific/t5-ai-board/overview-t5-ai-board">Tuya T5AI Dev Kit</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tools">Web Serial Tool</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/cbGrBjx7" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/tuyasmart" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@tuya2023" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/tuya-smart" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/tuya/TuyaOpen" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://gitee.com/tuya-open/TuyaOpen" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee(Mirror)<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Acknowledgements</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://storyset.com/technology" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks for the technology illustrations by Storyset<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <p style="font-weight: 500;">Copyright © TuyaOpen Authors 2025 | Documentation Distributed under Apache License Version 2.0</p>
      </div></div></div></footer></div>
</body>
</html>