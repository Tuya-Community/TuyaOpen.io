"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([[2393],{701:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/new-platform-build2-9b8f6eb6ef98c35d22ba8a6db16a5221.png"},1800:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"quick_start/new-platform","title":"Create platform","description":"Overview","source":"@site/docs/quick_start/new-platform.md","sourceDirName":"quick_start","slug":"/quick_start/new-platform","permalink":"/docs/quick_start/new-platform","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/quick_start/new-platform.md","tags":[],"version":"current","frontMatter":{"title":"Create platform"},"sidebar":"docs","previous":{"title":"Introduction to tyutool Tool","permalink":"/docs/quick_start/tools-tyutool"},"next":{"title":"Device Network Configuration","permalink":"/docs/quick_start/device-network-configuration"}}');var r=n(4848),o=n(8453);const s={title:"Create platform"},l="Create platform",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Operation Principle",id:"operation-principle",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"FAQ",id:"faq",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsxs)(t.h1,{id:"create-platform",children:["Create ",(0,r.jsx)(t.code,{children:"platform"})]})}),"\n",(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(t.p,{children:["Use the command ",(0,r.jsx)(t.code,{children:"tos.py new platform"})," to create a new hardware platform porting template."]}),"\n",(0,r.jsx)(t.p,{children:"This command is intended for developers who want to port TuyaOS to a new hardware chip or development board that is not officially supported yet. It will automatically generate a complete directory structure and basic code files for adapting to the new hardware."}),"\n",(0,r.jsxs)(t.p,{children:["Summary: The new platform command greatly simplifies the workload of porting TuyaOS to new hardware. Developers do not need to manually create all the required files and directories. Just run this command and then focus on implementing the hardware-specific driver code in the generated template files (",(0,r.jsx)(t.code,{children:".c"})," and ",(0,r.jsx)(t.code,{children:".h"}),")."]}),"\n",(0,r.jsx)(t.h2,{id:"operation-principle",children:"Operation Principle"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Enter the command ",(0,r.jsx)(t.code,{children:"tos.py new platform"}),": You will be prompted to enter the name of the new platform (e.g., ",(0,r.jsx)(t.code,{children:"my_new_chip"}),")."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"input new platform",src:n(9888).A+"",width:"565",height:"140"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Generate Kconfig configuration:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Create a top-level ",(0,r.jsx)(t.code,{children:"Kconfig"})," file to integrate the new platform into the project's configuration system."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["A ",(0,r.jsx)(t.code,{children:"menuconfig"})," interactive interface will pop up, allowing you to select which basic features (such as WIFI, BLE, GPIO, I2C, etc.) this new platform needs to support. Your selections will be saved in a ",(0,r.jsx)(t.code,{children:"default.config"})," file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"menuconfig",src:n(6330).A+"",width:"1393",height:"1068"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Create the platform directory: A folder named after your input (e.g., ",(0,r.jsx)(t.code,{children:"platform/my_new_chip"}),") will be created under the ",(0,r.jsx)(t.code,{children:"platform/"})," directory."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"new platform folder",src:n(6585).A+"",width:"1292",height:"322"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Copy adapter layer templates: According to your previous selections, the corresponding hardware abstraction layer (TKL - Tuya Kernel Layer) interface templates will be copied from the ",(0,r.jsx)(t.code,{children:"tools/porting/adapter"})," directory to ",(0,r.jsx)(t.code,{children:"platform/my_new_chip/tuyaos/"}),"."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"For example, if you checked the WIFI feature, the WIFI-related template files such as tkl_init_wifi.c and tkl_init_wifi.h will be copied over."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"new tuyaos",src:n(5618).A+"",width:"655",height:"897"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Create board-level configuration: A folder with the same name (e.g., ",(0,r.jsx)(t.code,{children:"boards/my_new_chip"}),") will also be created under the ",(0,r.jsx)(t.code,{children:"boards/"})," directory, and a corresponding ",(0,r.jsx)(t.code,{children:"Kconfig"})," file will be generated to add this new platform as an option in the build system."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"new board folder",src:n(2623).A+"",width:"1113",height:"302"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Build verification: Use the command ",(0,r.jsx)(t.code,{children:"tos.py new project"})," to create a new project, select the ",(0,r.jsx)(t.code,{children:"my_new_chip"})," platform, and use the command ",(0,r.jsx)(t.code,{children:"tos.py build"})," to build and verify."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"new project",src:n(8127).A+"",width:"457",height:"317"})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"build project",src:n(701).A+"",width:"842",height:"255"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["In the ",(0,r.jsx)(t.code,{children:"platform/my_new_chip/tuyaos/tuyaos_adapter/src"})," directory, fill in the actual hardware driver code as prompted."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Modify the ",(0,r.jsx)(t.code,{children:"platform/my_new_chip/toolchain_file.cmake"})," file to configure the actual path of the build tools."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Modify the ",(0,r.jsx)(t.code,{children:"platform/my_new_chip/build_example.py"})," file to complete the build and link steps."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"faq",children:"FAQ"})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},2623:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/new-platform-filelist2-b43cd6f527c5b15ac77b208553c9c011.png"},5618:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/new-platform-generate-fdcc5994e0e355bb0f0f22a82b6b47d5.png"},6330:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/new-platform-menu-cf0734c0b66f5a5ce7769a5e7d7f5746.png"},6585:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/new-platform-filelist-1146c6a2fc5971c240ff144f85786971.png"},8127:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/new-platform-build-ca6d8d17dd2ddf32a444f5e1721fb628.png"},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var i=n(6540);const r={},o=i.createContext(r);function s(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:t},e.children)}},9888:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/new-platform-input-7bc2d5c588b5ed3f9a457f98ce2321d7.png"}}]);