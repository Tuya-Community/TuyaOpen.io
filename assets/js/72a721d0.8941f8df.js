"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([[7691],{1557:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/long_talk-3e2d3c27eeb21400254c43f720010e99.svg"},7833:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/free_talk-12da31c77b89786bc515696a41138e51.svg"},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var r=i(96540);const s={},t=r.createContext(s);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(t.Provider,{value:n},e.children)}},40886:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/wakeup_talk-e3040be35f3132b58abd0da3e02e844e.svg"},50094:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"applications/tuya.ai/demo-duo-eyes-mood","title":"Duo-Eyes Mood Robot","description":"duoeyemood is an open-source large-model intelligent chat robot based on tuya.ai. It collects voice through a microphone, performs speech recognition, enables conversation, interaction, and banter, and can display the current emotional state through the dual-eye screens.","source":"@site/docs/applications/tuya.ai/demo-duo-eyes-mood.md","sourceDirName":"applications/tuya.ai","slug":"/applications/tuya.ai/demo-duo-eyes-mood","permalink":"/docs/applications/tuya.ai/demo-duo-eyes-mood","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/applications/tuya.ai/demo-duo-eyes-mood.md","tags":[],"version":"current","frontMatter":{"title":"Duo-Eyes Mood Robot"},"sidebar":"docs","previous":{"title":"Your Chat Bot","permalink":"/docs/applications/tuya.ai/demo-your-chat-bot"},"next":{"title":"AI Voice Interaction Implementation","permalink":"/docs/applications/tuya.ai/ai-components/ai-audio-asr-impl"}}');var s=i(74848),t=i(28453);const d={title:"Duo-Eyes Mood Robot"},o=void 0,l={},a=[{value:"Features",id:"features",level:2},{value:"Hardware Support List",id:"hardware-support-list",level:2},{value:"File Structure",id:"file-structure",level:2},{value:"Root Directory Structure",id:"root-directory-structure",level:3},{value:"Hardware Config Directory",id:"hardware-config-directory",level:3},{value:"Header Files Directory",id:"header-files-directory",level:3},{value:"Source Code Directory",id:"source-code-directory",level:3},{value:"Display Module",id:"display-module",level:4},{value:"Application Configuration",id:"application-configuration",level:2},{value:"Workflow",id:"workflow",level:2},{value:"Build Project",id:"build-project",level:2},{value:"Adapting New Boards",id:"adapting-new-boards",level:2},{value:"Peripheral Requirements List",id:"peripheral-requirements-list",level:3},{value:"Board Adaptation",id:"board-adaptation",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://github.com/tuya/TuyaOpen/tree/master/apps/tuya.ai/duo_eye_mood",children:"duo_eye_mood"})," is an open-source large-model intelligent chat robot based on tuya.ai. It collects voice through a microphone, performs speech recognition, enables conversation, interaction, and banter, and can display the current emotional state through the dual-eye screens."]}),"\n",(0,s.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Supports Tuya voice AI agent and four chat modes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Long-press talk mode"}),": The user must keep pressing the button to input voice; releasing the button ends the voice input."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Button talk mode"}),": The device enters standby by default after powering on. The user short-presses the button to enter listening mode, then can input voice and interact with the AI agent."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wakeup talk mode"}),": The user must say the wake word before each conversation to wake up the device, then can have a single conversation, similar to a smart speaker."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Free talk mode"}),": After waking up the device with the wake word, the user can have continuous conversations. If there is no conversation after wakeup, the device will return to standby after 30 seconds and needs to be woken up again for the next conversation."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Supports interrupting the conversation locally by pressing the button."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Supports various status prompt sounds, such as network configuration, offline, wakeup, etc."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Supports displaying the current emotion of the chatbot through various GIFs on the eyes, such as angry, surprised, scared, confused, etc., making it more fun."}),"\n",(0,s.jsx)(n.p,{children:"Supported emotions: Neutral / Surprise / Angry / Crying / Moved / Sad / Thinking / Happy / Reject / Disappointed."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Supports adjusting device volume via App."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Power cycling the device 3 times in a row will enter network configuration mode."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Supports real-time switching of AI agent roles via App."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hardware-support-list",children:"Hardware Support List"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Board"}),(0,s.jsx)(n.th,{children:"Config File"}),(0,s.jsx)(n.th,{children:"PID"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["T5AI_BOARD dev board + Duo-Eyes accessory",(0,s.jsx)("br",{}),'(2 x 1.28" spi565 st7735S round screens)']}),(0,s.jsx)(n.td,{children:"TUYA_T5AI_BOARD_EYES.config"}),(0,s.jsx)(n.td,{children:"8ixyalzpn0jrun9y"})]})})]}),"\n",(0,s.jsx)(n.h2,{id:"file-structure",children:"File Structure"}),"\n",(0,s.jsx)(n.h3,{id:"root-directory-structure",children:"Root Directory Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:".\n\u251c\u2500\u2500 app_default.config       # Default application config file\n\u251c\u2500\u2500 CMakeLists.txt           # CMake build script\n\u251c\u2500\u2500 config                   # Hardware config directory\n\u251c\u2500\u2500 include                  # Header files directory\n\u251c\u2500\u2500 Kconfig                  # Project config file\n\u251c\u2500\u2500 README.md                # English documentation\n\u251c\u2500\u2500 README_zh.md             # Chinese documentation\n\u2514\u2500\u2500 src                      # Source code directory\n"})}),"\n",(0,s.jsx)(n.h3,{id:"hardware-config-directory",children:"Hardware Config Directory"}),"\n",(0,s.jsxs)(n.p,{children:["The files in the ",(0,s.jsx)(n.code,{children:"config"})," directory are configuration files for various boards. If you adapt a new board based on this application, you can add the config file here."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u251c\u2500\u2500 config       \n\u2502\xa0\xa0 \u2514\u2500\u2500 TUYA_T5AI_BOARD_EYES.config    # T5AI_BOARD dev board + Duo-Eyes accessory\n"})}),"\n",(0,s.jsx)(n.h3,{id:"header-files-directory",children:"Header Files Directory"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u251c\u2500\u2500 include\n\u2502\xa0\xa0 \u251c\u2500\u2500 app_chat_bot.h       # Chat bot feature header\n\u2502\xa0\xa0 \u251c\u2500\u2500 app_display.h        # Display module header\n\u2502\xa0\xa0 \u251c\u2500\u2500 reset_netcfg.h       # Power cycle reset feature header\n\u2502\xa0\xa0 \u2514\u2500\u2500 tuya_config.h        # Device license and info config\n"})}),"\n",(0,s.jsx)(n.h3,{id:"source-code-directory",children:"Source Code Directory"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 app_chat_bot.c       # Chat bot feature implementation\n    \u251c\u2500\u2500 display              # Display module\n    \u251c\u2500\u2500 reset_netcfg.c       # Power cycle reset feature\n    \u2514\u2500\u2500 tuya_main.c          # Application entry\n"})}),"\n",(0,s.jsx)(n.h4,{id:"display-module",children:"Display Module"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u251c\u2500\u2500 display                  # Display module\n\u2502\xa0\xa0 \u251c\u2500\u2500 app_display.c        # Main display control file\n\u2502\xa0\xa0 \u251c\u2500\u2500 CMakeLists.txt       # Display module CMake config\n\u2502\xa0\xa0 \u251c\u2500\u2500 image                # Image resources directory\n\u2502\xa0\xa0 \u251c\u2500\u2500 tuya_lvgl.c          # LVGL adaptation file\n\u2502\xa0\xa0 \u251c\u2500\u2500 tuya_lvgl.h          # LVGL adaptation header\n\u2502\xa0\xa0 \u2514\u2500\u2500 ui                   # UI implementation\n\u2502\xa0\xa0     \u251c\u2500\u2500 ui_display.h     # UI module common header\n\u2502\xa0\xa0     \u2514\u2500\u2500 ui_eyes.c        # Duo-Eyes emotion display UI\n"})}),"\n",(0,s.jsx)(n.h2,{id:"application-configuration",children:"Application Configuration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Product PID"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Macro"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TUYA_PRODUCT_KEY"}),(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"Product ID, bound to Tuya AI agent"})]})})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Select Chat Mode"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Macro"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_CHAT_MODE_KEY_PRESS_HOLD_SINGEL"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:"Long-press talk mode"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_CHAT_MODE_KEY_TRIG_VAD_FREE"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:"Button talk mode"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_CHAT_MODE_ASR_WAKEUP_SINGEL"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:"Wakeup talk mode"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_CHAT_MODE_ASR_WAKEUP_FREE"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:"Free talk mode"})]})]})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Select Wake Word"})}),"\n",(0,s.jsxs)(n.p,{children:["This config only appears when selecting ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Wakeup Talk"})})," or ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"Free Talk"})})," mode."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Macro"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_NIHAO_TUYA"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:'Wake word is "Nihao Tuya"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_NIHAO_XIAOZHI"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:'Wake word is "Nihao Xiaozhi"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_XIAOZHI_TONGXUE"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:'Wake word is "Xiaozhi Tongxue"'})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_XIAOZHI_GUANJIA"}),(0,s.jsx)(n.td,{children:"Bool"}),(0,s.jsx)(n.td,{children:'Wake word is "Xiaozhi Guanjia"'})]})]})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"workflow",children:"Workflow"}),"\n",(0,s.jsxs)(n.p,{children:["This project depends on the ",(0,s.jsx)(n.a,{href:"/docs/applications/tuya.ai/ai-components/ai-audio-asr-impl",children:"ai_audio"})," application component, which mainly implements audio collection, playback, cloud AI session creation, and other functions."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Long-press talk mode"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(1557).A+"",width:"756",height:"718"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Button talk mode"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(82067).A+"",width:"779",height:"689"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Wakeup talk mode"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(40886).A+"",width:"664",height:"673"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Free talk mode"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(7833).A+"",width:"664",height:"754"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"build-project",children:"Build Project"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["For environment setup and configuration, please refer to ",(0,s.jsx)(n.a,{href:"/docs/quick-start/",children:"Quick Start"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Change directory from the TuyaOpen root to the application directory"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"cd apps/tuya.ai/duo_eye_mood\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Select the corresponding dev board config"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"tos.py config choice\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Build the project"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"tos.py build\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"adapting-new-boards",children:"Adapting New Boards"}),"\n",(0,s.jsx)(n.h3,{id:"peripheral-requirements-list",children:"Peripheral Requirements List"}),"\n",(0,s.jsxs)(n.p,{children:["For the list of peripherals supported by tuyaopen, please refer to ",(0,s.jsx)(n.a,{href:"/docs/peripheral/support_peripheral_list",children:"Peripheral Driver List"}),". Any new board must have the ",(0,s.jsx)(n.strong,{children:"required"})," peripheral drivers listed."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Peripheral"}),(0,s.jsx)(n.th,{children:"Peripheral Component"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Required"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Audio Driver"}),(0,s.jsx)(n.td,{children:"audio_codecs"}),(0,s.jsxs)(n.td,{children:["Can collect audio data, format PCM.",(0,s.jsx)("br",{}),"Can play voice, format MP3, 16bit, 16KHz, mono."]}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Display Driver"}),(0,s.jsx)(n.td,{children:"display"}),(0,s.jsxs)(n.td,{children:['Has two 1.28" round screens, two eyes.',(0,s.jsx)("br",{}),"Both round screens are controlled by the same driver interface, i.e., the animation displayed on both screens is identical."]}),(0,s.jsx)(n.td,{children:"Yes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"LED Driver"}),(0,s.jsx)(n.td,{children:"led"}),(0,s.jsx)(n.td,{children:"Indicates whether the device is listening, etc."}),(0,s.jsx)(n.td,{children:"No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Button Driver"}),(0,s.jsx)(n.td,{children:"button"}),(0,s.jsx)(n.td,{children:"Interrupts conversation, starts conversation in button talk mode."}),(0,s.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"board-adaptation",children:"Board Adaptation"}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["The unified entry for board peripheral driver registration is ",(0,s.jsx)(n.code,{children:"board_register_hardware"}),", and the implementation of this interface is placed in the board-level folder."]}),(0,s.jsxs)(n.p,{children:["If developers want to modify the hardware configuration of the driver (such as changing pins, chip types, etc.), please make changes in the target board's folder (boards/target environment/target board, such as ",(0,s.jsx)(n.code,{children:"boards/T5AI/TUYA_T5AI_BOARD"}),")."]})]}),"\n",(0,s.jsxs)(n.p,{children:["Please refer to ",(0,s.jsx)(n.a,{href:"/docs/new-hardware/new-board",children:"Adding New Board Support"})," for the steps to add and adapt new boards."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},82067:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/button_talk-b7aa9f55466d8126d0760c0f0b1215b9.svg"}}]);