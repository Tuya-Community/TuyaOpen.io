"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([["4013"],{1735(e,n,r){r.r(n),r.d(n,{metadata:()=>i,default:()=>h,frontMatter:()=>d,contentTitle:()=>a,toc:()=>s,assets:()=>l});var i=JSON.parse('{"id":"new-hardware/new-board","title":"Create Board","description":"Overview","source":"@site/docs/new-hardware/new-board.md","sourceDirName":"new-hardware","slug":"/new-hardware/new-board","permalink":"/docs/new-hardware/new-board","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/new-hardware/new-board.md","tags":[],"version":"current","frontMatter":{"title":"Create Board"},"sidebar":"docs","previous":{"title":"Create platform","permalink":"/docs/new-hardware/new-platform"},"next":{"title":"Create Project","permalink":"/docs/new-hardware/new-project"}}'),o=r(4848),t=r(8453);let d={title:"Create Board"},a="Create Board",l={},s=[{value:"Overview",id:"overview",level:2},{value:"Board naming",id:"board-naming",level:2},{value:"Required fields",id:"required-fields",level:3},{value:"Optional fields",id:"optional-fields",level:3},{value:"Naming rules",id:"naming-rules",level:3},{value:"Procedure",id:"procedure",level:2},{value:"Next step",id:"next-step",level:2},{value:"Verify the compilation",id:"verify-the-compilation",level:3},{value:"Adapt to development boards",id:"adapt-to-development-boards",level:3},{value:"Adjust configuration",id:"adjust-configuration",level:3},{value:"Save configuration",id:"save-configuration",level:3},{value:"FAQs",id:"faqs",level:2},{value:"How to delete a created development board?",id:"how-to-delete-a-created-development-board",level:3},{value:"How to rename a created development board?",id:"how-to-rename-a-created-development-board",level:3}];function c(e){let n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"create-board",children:"Create Board"})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"This topic is intended for developers designing new hardware development boards independently, providing guidance on the driver initialization process and adaptation for that development board."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"tos.py new board"})," is a command-line tool provided by the TuyaOpen SDK. It is used to rapidly create a new support package based on chip platforms already supported by TuyaOpen. Utilizing an interactive interface and a template system, this command helps you quickly add new board configurations for existing chip platforms, significantly simplifying the hardware porting and adaptation workflow."]}),"\n",(0,o.jsx)(n.h2,{id:"board-naming",children:"Board naming"}),"\n",(0,o.jsx)(n.h3,{id:"required-fields",children:"Required fields"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Manufacturer name: The manufacturer of the development board. Boards released by Tuya would start with ",(0,o.jsx)(n.strong,{children:"TUYA"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Chip name: The platform name, such as ",(0,o.jsx)(n.strong,{children:"T2"})," and ",(0,o.jsx)(n.strong,{children:"T5AI"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"optional-fields",children:"Optional fields"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Key features: If the board has specific functional modules or characteristics, they should reflect the board's main features or functions, such as ",(0,o.jsx)(n.strong,{children:"LCD"})," and ",(0,o.jsx)(n.strong,{children:"CAM"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Series name and version information: Some manufacturers have product series, which can be reflected in the naming along with version numbers."}),"\n",(0,o.jsx)(n.li,{children:"Other: Various hardware identifiers."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"naming-rules",children:"Naming rules"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Use uppercase English letters."}),"\n",(0,o.jsx)(n.li,{children:"Connect fields with underscores (_)."}),"\n",(0,o.jsxs)(n.li,{children:["Field combination order: ",(0,o.jsx)(n.strong,{children:"Manufacturer name_Development board name_Optional fields"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Avoid using special characters."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Example: ",(0,o.jsx)(n.code,{children:"TUYA_T5AI_BOARD"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"procedure",children:"Procedure"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run the command ",(0,o.jsx)(n.code,{children:"tos.py new board"})," and select the desired platform. After the command is run, the system will list all available hardware platforms."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'[INFO]: Running tos.py ...\n--------------------\n1. BK7231X\n2. ESP32\n3. LN882H\n4. T2\n5. T3\n6. T5AI\n7. Ubuntu\n--------------------\nInput "q" to exit.\nChoice platform: 6\n'})}),"\n",(0,o.jsx)(n.p,{children:"Use the arrow keys to select the desired platform (using T5AI as an example here), then press Enter to confirm."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Enter the development board name."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"[NOTE] Input new board name.\ninput: MY_CUSTOM_BOARD\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"Strictly adhere to the naming rules during this process."})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The system will automatically generate the following file structure."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"boards/<platform>/<board_name>/\n\u251C\u2500\u2500 Kconfig           # Board-level configuration file\n\u251C\u2500\u2500 CMakeLists.txt    # CMake build configuration\n\u251C\u2500\u2500 board_com_api.h   # Board-level API declarations\n\u2514\u2500\u2500 board_com_api.c   # Board-level API implementations\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"boards/<platform>/Kconfig"})," file will be automatically updated to include the configuration options for the new board."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'config BOARD_CHOICE_MY_CUSTOM_BOARD\nbool "MY_CUSTOM_BOARD"\nif (BOARD_CHOICE_MY_CUSTOM_BOARD)\n    rsource "./MY_CUSTOM_BOARD/Kconfig"\nendif\n'})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-step",children:"Next step"}),"\n",(0,o.jsx)(n.p,{children:"Overview:"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Verify the compilation."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Modify the ",(0,o.jsx)(n.code,{children:"boards/<platform>/<board_name>/board_com_api.c"})," file to adapt to the new development board."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Adjust the configuration."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Save the board-level default configuration file."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"verify-the-compilation",children:"Verify the compilation"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run the command ",(0,o.jsx)(n.code,{children:"tos.py new project"})," to create a new project and navigate to the project directory."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run the command ",(0,o.jsx)(n.code,{children:"tos.py config choice"})," to select configurations for the same chip platform (this can save configuration time)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run the command ",(0,o.jsx)(n.code,{children:"tos.py config menu"})," to select the newly created development board."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run the command ",(0,o.jsx)(n.code,{children:"tos.py build"})," to verify the compilation."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"adapt-to-development-boards",children:"Adapt to development boards"}),"\n",(0,o.jsxs)(n.p,{children:["Modify the ",(0,o.jsx)(n.code,{children:"boards/<platform>/<board_name>/board_com_api.c"})," file to adapt to the new development board."]}),"\n",(0,o.jsxs)(n.p,{children:["Locate the ",(0,o.jsx)(n.code,{children:"PERATE_RET board_register_hardware(void)"})," function within the file and modify it based on the new board's hardware information."]}),"\n",(0,o.jsx)(n.p,{children:"For example, add initialization code for peripherals such as KEY, LED, and I2C. You can refer to the implementation of existing development boards for this process."}),"\n",(0,o.jsxs)(n.p,{children:["If you need to add other source files or header directories, you can do so by modifying the ",(0,o.jsx)(n.code,{children:"CMakeLists.txt"})," file and configuring the ",(0,o.jsx)(n.code,{children:"LIB_SRCS"})," and ",(0,o.jsx)(n.code,{children:"LIB_PUBLIC_INC"})," variables."]}),"\n",(0,o.jsx)(n.h3,{id:"adjust-configuration",children:"Adjust configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Run the command ",(0,o.jsx)(n.code,{children:"tos.py config menu"})," to enter the configuration menu and adjust functional options and parameters."]}),"\n",(0,o.jsx)(n.p,{children:"Then, combine this with the previous step to verify the functionality."}),"\n",(0,o.jsx)(n.h3,{id:"save-configuration",children:"Save configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Copy the ",(0,o.jsx)(n.code,{children:"app_default.config"})," file from the project directory to the ",(0,o.jsx)(n.code,{children:"boards/<platform>/config"})," directory, and rename it to ",(0,o.jsx)(n.code,{children:"<board_name>.config"})," to facilitate use by other developers."]}),"\n",(0,o.jsx)(n.h2,{id:"faqs",children:"FAQs"}),"\n",(0,o.jsx)(n.h3,{id:"how-to-delete-a-created-development-board",children:"How to delete a created development board?"}),"\n",(0,o.jsxs)(n.p,{children:["Delete the ",(0,o.jsx)(n.code,{children:"boards/<platform>/<board_name>"})," directory, then manually remove the relevant configuration from ",(0,o.jsx)(n.code,{children:"boards/<platform>/Kconfig"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"how-to-rename-a-created-development-board",children:"How to rename a created development board?"}),"\n",(0,o.jsx)(n.p,{children:"You can rename the board manually."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Rename the development board directory."}),"\n",(0,o.jsx)(n.li,{children:"Update the references in the platform's Kconfig."}),"\n",(0,o.jsx)(n.li,{children:"Update the default values in the development board's internal Kconfig."}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>d,x:()=>a});var i=r(6540);let o={},t=i.createContext(o);function d(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);