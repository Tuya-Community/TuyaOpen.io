"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([["8615"],{3392(e,n,s){s.r(n),s.d(n,{metadata:()=>t,default:()=>_,frontMatter:()=>l,contentTitle:()=>c,toc:()=>a,assets:()=>d});var t=JSON.parse('{"id":"tkl-api/tkl_system","title":"tkl_system | System Interfaces","description":"Overview","source":"@site/docs/tkl-api/tkl_system.md","sourceDirName":"tkl-api","slug":"/tkl-api/tkl_system","permalink":"/docs/tkl-api/tkl_system","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/tkl-api/tkl_system.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"tkl_semaphore | Semaphore","permalink":"/docs/tkl-api/tkl_semaphore"},"next":{"title":"tkl_timer | Timer Driver","permalink":"/docs/tkl-api/tkl_timer"}}'),r=s(4848),i=s(8453);let l={},c="tkl_system | System Interfaces",d={},a=[{value:"Overview",id:"overview",level:2},{value:"API description",id:"api-description",level:2},{value:"tkl_system_reset",id:"tkl_system_reset",level:3},{value:"tkl_system_get_tick_count",id:"tkl_system_get_tick_count",level:3},{value:"tkl_system_get_millisecond",id:"tkl_system_get_millisecond",level:3},{value:"tkl_system_get_random",id:"tkl_system_get_random",level:3},{value:"tkl_system_get_reset_reason",id:"tkl_system_get_reset_reason",level:3},{value:"tkl_system_sleep",id:"tkl_system_sleep",level:3},{value:"tkl_system_delay",id:"tkl_system_delay",level:3},{value:"tkl_system_get_cpu_info",id:"tkl_system_get_cpu_info",level:3}];function o(e){let n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"tkl_system--system-interfaces",children:"tkl_system | System Interfaces"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This topic describes the interfaces related to system functions."}),"\n",(0,r.jsx)(n.h2,{id:"api-description",children:"API description"}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_reset",children:"tkl_system_reset"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"void tkl_system_reset(void)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Performs a system reboot."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Parameter: None."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Return value: None."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Calling this function will cause the system to reboot."})}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_get_tick_count",children:"tkl_system_get_tick_count"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"SYS_TICK_T tkl_system_get_tick_count(void)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Gets the system tick count."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Parameter: None."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Return value: ",(0,r.jsx)(n.code,{children:"SYS_TICK_T"}),", the current value of the system tick count."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_get_millisecond",children:"tkl_system_get_millisecond"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"SYS_TIME_T tkl_system_get_millisecond(void)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Gets the number of milliseconds elapsed since system startup."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Parameter: None."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Return value: ",(0,r.jsx)(n.code,{children:"SYS_TIME_T"}),", the total number of milliseconds from system startup to the current moment."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_get_random",children:"tkl_system_get_random"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"int tkl_system_get_random(uint32_t range)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Gets a random number within a specified range."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Parameter: ",(0,r.jsx)(n.code,{children:"range"})," indicates the range of the random number, from ",(0,r.jsx)(n.code,{children:"0"})," to ",(0,r.jsx)(n.code,{children:"range"})," (excluding ",(0,r.jsx)(n.code,{children:"range"})," itself)."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Return value: ",(0,r.jsx)(n.code,{children:"int"}),", the generated random number."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"The random number generator is initialized upon its first call."})}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_get_reset_reason",children:"tkl_system_get_reset_reason"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"TUYA_RESET_REASON_E tkl_system_get_reset_reason(char** describe)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Gets the reason for the system reset."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Parameter: ",(0,r.jsx)(n.code,{children:"describe"}),", a pointer to a string describing the system reset reason."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Return value: ",(0,r.jsx)(n.code,{children:"TUYA_RESET_REASON_E"}),", an enumeration value indicating the reset reason."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"    typedef enum {\n        TUYA_RESET_REASON_POWERON    = 0,  ///< Power-on reset type, supply voltage < power-on threshold (TY_RST_POWER_OFF)\n        TUYA_RESET_REASON_HW_WDOG    = 1,  ///< Hardware watchdog reset occurred (TY_RST_HARDWARE_WATCHDOG)\n        TUYA_RESET_REASON_FAULT      = 2,  ///< An access fault occurred (TY_RST_FATAL_EXCEPTION)\n        TUYA_RESET_REASON_SW_WDOG    = 3,  ///< Software watchdog reset occurred (TY_RST_SOFTWARE_WATCHDOG)\n        TUYA_RESET_REASON_SOFTWARE   = 4,  ///< Software triggered reset (TY_RST_SOFTWARE)\n        TUYA_RESET_REASON_DEEPSLEEP  = 5,  ///< Reset caused by entering deep sleep (TY_RST_DEEPSLEEP)\n        TUYA_RESET_REASON_EXTERNAL   = 6,  ///< External reset trigger        (TY_RST_HARDWARE)\n        TUYA_RESET_REASON_UNKNOWN    = 7,  ///< Underterminable cause\n        TUYA_RESET_REASON_FIB        = 8,  ///< Reset originated from the FIB bootloader\n        TUYA_RESET_REASON_BOOTLOADER = 8,  ///< Reset relates to an bootloader\n        TUYA_RESET_REASON_CRASH      = 10, ///< Software crash\n        TUYA_RESET_REASON_FLASH      = 11, ///< Flash failure caused reset\n        TUYA_RESET_REASON_FATAL      = 12, ///< A non-recoverable fatal error occurred\n        TUYA_RESET_REASON_BROWNOUT   = 13, ///< Brown out\n        TUYA_RESET_REASON_UNSUPPORT  = 0xFF,\n    } TUYA_RESET_REASON_E;\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Different reset sources are mapped to specific enumeration values."})}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_sleep",children:"tkl_system_sleep"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"void tkl_system_sleep(uint32_t num_ms)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Puts the system into a sleep state for a specified duration."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Parameter: ",(0,r.jsx)(n.code,{children:"num_ms"}),", the sleep duration in milliseconds."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Return value: None."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Calling this function will pause the task scheduler for the current task for a specified duration."})}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_delay",children:"tkl_system_delay"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"void tkl_system_delay(uint32_t num_ms)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Delays the system for a specified duration."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Parameter: ",(0,r.jsx)(n.code,{children:"num_ms"}),", the delay duration in milliseconds."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Return value: None."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"tkl_system_get_cpu_info",children:"tkl_system_get_cpu_info"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_system_get_cpu_info(TUYA_CPU_INFO_T **cpu_ary, int *cpu_cnt)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Feature: Gets the system CPU information."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cpu_ary"}),": Pointer to an array of type ",(0,r.jsx)(n.code,{children:"TUYA_CPU_INFO_T"}),", used to receive CPU information."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cpu_cnt"}),": Pointer used to receive the number of CPUs."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Return value: ",(0,r.jsx)(n.code,{children:"OPERATE_RET"})," indicates the operation result. ",(0,r.jsx)(n.code,{children:"OPRT_OK"})," indicates success, while any other value indicates an error. For detailed error codes, refer to ",(0,r.jsx)(n.code,{children:"tuya_error_code.h"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["This function is not supported in the current implementation. Calling it will return ",(0,r.jsx)(n.code,{children:"OPRT_NOT_SUPPORTED"}),"."]})})]})}function _(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>c});var t=s(6540);let r={},i=t.createContext(r);function l(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);