"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([["9095"],{70794:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>t,toc:()=>d,default:()=>h,metadata:()=>r,assets:()=>a,contentTitle:()=>c});var r=JSON.parse('{"id":"project-walkthrough","title":"Directory Structure","description":"Overview","source":"@site/docs/project-walkthrough.md","sourceDirName":".","slug":"/project-walkthrough","permalink":"/docs/project-walkthrough","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/project-walkthrough.md","tags":[],"version":"current","frontMatter":{"title":"Directory Structure"},"sidebar":"docs","previous":{"title":"About TuyaOpen","permalink":"/docs/about-tuyaopen"},"next":{"title":"quick-start","permalink":"/docs/quick-start/"}}'),o=i(74848),s=i(84429);let t={title:"Directory Structure"},c="Directory Structure",a={},d=[{value:"Overview",id:"overview",level:2},{value:"<code>src</code>",id:"src",level:2},{value:"<code>apps</code> and <code>examples</code>",id:"apps-and-examples",level:2},{value:"<code>app_default.config</code>",id:"app_defaultconfig",level:2},{value:"<code>platform</code> and <code>platform_config.yaml</code>",id:"platform-and-platform_configyaml",level:2},{value:"<code>boards</code>",id:"boards",level:2},{value:"<code>tos.py</code> and <code>export.sh</code>",id:"tospy-and-exportsh",level:2},{value:"<code>tools</code>",id:"tools",level:2},{value:"Temporary files and directories",id:"temporary-files-and-directories",level:2}];function l(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"directory-structure",children:"Directory Structure"})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"This topic describes the directory structure and purpose of TuyaOpen."}),"\n",(0,o.jsx)(n.p,{children:"Main directory is as follows:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:".\n\u251C\u2500\u2500 apps\n\u2502\xa0\xa0 \u251C\u2500\u2500 tuya.ai\n\u2502\xa0\xa0 \u2514\u2500\u2500 tuya_cloud\n\u251C\u2500\u2500 boards\n\u251C\u2500\u2500 CMakeLists.txt\n\u251C\u2500\u2500 Dockerfile\n\u251C\u2500\u2500 examples\n\u251C\u2500\u2500 export.bat\n\u251C\u2500\u2500 export.sh\n\u251C\u2500\u2500 LICENSE\n\u251C\u2500\u2500 platform\n\u2502\xa0\xa0 \u2514\u2500\u2500 platform_config.yaml\n\u251C\u2500\u2500 README.md\n\u251C\u2500\u2500 requirements.txt\n\u251C\u2500\u2500 src\n\u251C\u2500\u2500 tools\n\u2502\xa0\xa0 \u251C\u2500\u2500 cli_command\n\u2502\xa0\xa0 \u251C\u2500\u2500 cmake\n\u2502\xa0\xa0 \u251C\u2500\u2500 kconfiglib\n\u2502\xa0\xa0 \u2514\u2500\u2500 tyutool\n\u2514\u2500\u2500 tos.py\n"})}),"\n",(0,o.jsx)(n.h2,{id:"src",children:(0,o.jsx)(n.code,{children:"src"})}),"\n",(0,o.jsx)(n.p,{children:"The main storage location for core source code, including the implementation of the framework's fundamental functionalities, core modules, and cross-platform universal code."}),"\n",(0,o.jsx)(n.p,{children:"The following features are supported:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Basic components and services"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"System kernel"}),": Includes fundamental operating system (OS) functionalities such as task scheduling, memory management, and thread synchronization (mutexes and semaphores)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Device management"}),": Implements core logic for device initialization, state management, and resource allocation, such as device registration and configuration loading."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Communication protocol stack"}),": Provides encapsulated upper-layer interfaces for Bluetooth, Wi-Fi, MQTT, and HTTP, thereby delivering unified network communication capabilities for applications."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Cross-platform abstraction layer"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Hardware-agnostic interface"}),": Defines hardware-decoupled APIs that implement specific functionalities by invoking drivers in the ",(0,o.jsx)(n.code,{children:"platform"})," directory."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"OS abstraction"}),": Provides cross-OS interfaces, such as thread creation and timer management, to ensure the framework can run on different systems, like Linux and RTOS."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Main components include:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"src/\n\u251C\u2500\u2500 base/           # Basic utilities (logging, memory operations, and data structures)\n\u251C\u2500\u2500 device/         # Core device management code\n\u251C\u2500\u2500 network/        # Network communications (Wi-Fi, Bluetooth, and MQTT)\n\u251C\u2500\u2500 security/       # Security and encryption (device auth and data encryption)\n\u251C\u2500\u2500 ai/             # AI interfaces (voice recognition and image analytics)\n\u251C\u2500\u2500 cloud/          # Cloud integration services (Tuya cloud API calls)\n\u2514\u2500\u2500 utils/          # Common utility functions\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"apps-and-examples",children:[(0,o.jsx)(n.code,{children:"apps"})," and ",(0,o.jsx)(n.code,{children:"examples"})]}),"\n",(0,o.jsx)(n.p,{children:"Both are storage paths for projects, where:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"apps"})," directory contains complex application projects, divided into AI applications ",(0,o.jsx)(n.code,{children:"tuya.ai"})," and IoT applications ",(0,o.jsx)(n.code,{children:"tuya_cloud"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"examples"})," directory contains single-feature demo routines, such as WiFi, Bluetooth, and buttons."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"app_defaultconfig",children:(0,o.jsx)(n.code,{children:"app_default.config"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"TuyaOpen configuration file, used to configure project compilation parameters."})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"app_default.config"})," file only stores ",(0,o.jsx)(n.strong,{children:"minimum configuration items"}),", meaning it retains only settings that differ from default values."]})}),"\n",(0,o.jsx)(n.p,{children:"Main features:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Configure compilation parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Target platform definition: Records the target platform/development board (such as T5AI and ESP32) for the current project compilation, and determines the hardware driver and tool chain to load."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Compilation option control: Includes compiler flags (such as optimization level and macro definition), firmware version number, and storage partitioning."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Configure hardware resource allocation:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Peripheral parameters: Defines hardware interface parameters, such as serial port baud rate, GPIO pin assignment, and SPI clock rate."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Memory layout: Configure the firmware's address in the flash memory, RAM allocation, and other memory-related parameters."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Functional module toggles"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Enable/Disable components: Controls whether specific functional modules (such as Bluetooth, Wi-Fi, and AI services) are included in the project to avoid redundant code."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Configure options: Specifies whether to enable OTA update functionality."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.h2,{id:"platform-and-platform_configyaml",children:[(0,o.jsx)(n.code,{children:"platform"})," and ",(0,o.jsx)(n.code,{children:"platform_config.yaml"})]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"platform"})," file stores the toolchain repository. Each repository needs to implement:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Hardware abstraction layer (HAL)"}),"\n",(0,o.jsx)(n.p,{children:"For diverse chip architectures (like ESP32, BK7231N, and T5AI), this abstracts underlying driver implementations (like GPIO, UART, SPI, Bluetooth, and Wi-Fi protocol stacks). Thus, applications do not need to worry about specific hardware differences."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Unified APIs"}),"\n",(0,o.jsxs)(n.p,{children:["By defining standardized interfaces (like ",(0,o.jsx)(n.code,{children:"hal_gpio_read()"})," and ",(0,o.jsx)(n.code,{children:"hal_uart_send()"}),"), upper-layer code (such as application logic in the ",(0,o.jsx)(n.code,{children:"app"})," folder) can invoke hardware functionalities in the same way."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Due to the large storage footprint of toolchain repositories, only project-configured toolchains are downloaded when needed."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"git"})," related information required for toolchain downloads is recorded in the ",(0,o.jsx)(n.code,{children:"platform_config.yaml"})," file."]}),"\n"]}),"\n"]})}),"\n",(0,o.jsx)(n.h2,{id:"boards",children:(0,o.jsx)(n.code,{children:"boards"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"boards"})," folder primarily stores configuration files and support code related to development boards. Its core function is to adapt to different hardware platforms, ensuring the TuyaOpen framework runs properly across various development boards. The following describes specific functions and contents of this folder."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Configuration files"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Kconfig"})," files expose configurable chip or development board features and compilation parameters for developer customization. When the command ",(0,o.jsx)(n.code,{children:"tos config menu"})," is run, these configurations are automatically loaded and displayed."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Target selection"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"boards"})," folder contains configuration files for various development boards (such as ",(0,o.jsx)(n.code,{children:"T2.config"})," and ",(0,o.jsx)(n.code,{children:"T3.config"}),"). They define hardware parameters for target boards (such as UART baud rate, pin assignments, and memory layout). During compilation, run the command ",(0,o.jsx)(n.code,{children:"tos.py config choice"})," to select these configurations."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Hardware adaptation"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"boards"})," directory provides chip-specific (such as T2, T3, T5AI, and ESP32) underlying driver adaptation code and compilation scripts, ensuring the framework properly interacts with hardware peripherals (such as UART, GPIO, and SPI)."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.h2,{id:"tospy-and-exportsh",children:[(0,o.jsx)(n.code,{children:"tos.py"})," and ",(0,o.jsx)(n.code,{children:"export.sh"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"tos.py"})," is a core command-line tool designed to streamline development workflows, manage project configurations, and execute compilation and deployment operations. For more information, see ",(0,o.jsx)(n.a,{href:"/docs/tos-tools/tos-guide",children:"tos.py Guide"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"export.sh"})," and ",(0,o.jsx)(n.code,{children:"export.bat"})," are used to activate the command-line functionality of ",(0,o.jsx)(n.code,{children:"tos.py"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"tools",children:(0,o.jsx)(n.code,{children:"tools"})}),"\n",(0,o.jsx)(n.p,{children:"Stores tool scripts, utilities, and configuration files used during development, compilation, testing, and deployment."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Compilation and build tools"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Project build scripts: Contain scripts for compiling firmware and generating binary files. For example, Makefile, CMakeLists.txt, or custom Python scripts."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Firmware packaging tools: Package compiled code and configuration files into distributable firmware formats such as ",(0,o.jsx)(n.code,{children:".bin"})," and ",(0,o.jsx)(n.code,{children:".ota"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Development utilities"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Flashing tool: Provide the ",(0,o.jsx)(n.code,{children:"tyutool"})," utility for firmware flashing to hardware devices."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Config generator: Help generate device configuration files."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Code formatter: Format scripts to ensure code style consistency."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"temporary-files-and-directories",children:"Temporary files and directories"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:".venv"}),": The installation path of the Python virtual environment."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:".build"}),": The output directory, containing built firmware files."]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},84429:function(e,n,i){i.d(n,{R:()=>t,x:()=>c});var r=i(96540);let o={},s=r.createContext(o);function t(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);