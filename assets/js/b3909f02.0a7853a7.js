"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([[2874],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var o=i(96540);const r={},s=o.createContext(r);function t(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),o.createElement(s.Provider,{value:n},e.children)}},91183:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"project-walkthrough","title":"Directory Structure","description":"Overview","source":"@site/docs/project-walkthrough.md","sourceDirName":".","slug":"/project-walkthrough","permalink":"/docs/project-walkthrough","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/project-walkthrough.md","tags":[],"version":"current","frontMatter":{"title":"Directory Structure"},"sidebar":"docs","previous":{"title":"About TuyaOpen","permalink":"/docs/about-tuyaopen"},"next":{"title":"quick-start","permalink":"/docs/quick-start/"}}');var r=i(74848),s=i(28453);const t={title:"Directory Structure"},c="TuyaOpen Directory Structure",a={},d=[{value:"Overview",id:"overview",level:2},{value:"<code>src</code>",id:"src",level:2},{value:"<code>apps</code> and <code>examples</code>",id:"apps-and-examples",level:2},{value:"<code>app_default.config</code>",id:"app_defaultconfig",level:2},{value:"<code>platform</code> and <code>platform_config.yaml</code>",id:"platform-and-platform_configyaml",level:2},{value:"<code>boards</code>",id:"boards",level:2},{value:"<code>tos.py</code> and <code>export.sh</code>",id:"tospy-and-exportsh",level:2},{value:"<code>tools</code>",id:"tools",level:2},{value:"Temporary Files and Directories",id:"temporary-files-and-directories",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Subsequent Operations",id:"subsequent-operations",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"tuyaopen-directory-structure",children:"TuyaOpen Directory Structure"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["Introduction to the directory structure and purpose of ",(0,r.jsx)(n.code,{children:"TuyaOpen"})]}),"\n",(0,r.jsx)(n.p,{children:"Main directory display"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:".\n\u251c\u2500\u2500 apps\n\u2502   \u251c\u2500\u2500 tuya.ai\n\u2502   \u2514\u2500\u2500 tuya_cloud\n\u251c\u2500\u2500 boards\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 examples\n\u251c\u2500\u2500 export.bat\n\u251c\u2500\u2500 export.sh\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 platform\n\u2502   \u2514\u2500\u2500 platform_config.yaml\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 src\n\u251c\u2500\u2500 tools\n\u2502   \u251c\u2500\u2500 cli_command\n\u2502   \u251c\u2500\u2500 cmake\n\u2502   \u251c\u2500\u2500 kconfiglib\n\u2502   \u2514\u2500\u2500 tyutool\n\u2514\u2500\u2500 tos.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"src",children:(0,r.jsx)(n.code,{children:"src"})}),"\n",(0,r.jsx)(n.p,{children:"The main storage location for core source code, containing the framework's basic functionality implementation, core modules, and cross-platform common code"}),"\n",(0,r.jsx)(n.p,{children:"Main content includes:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Basic Components and Services"}),"\n",(0,r.jsx)(n.p,{children:"System Kernel: Contains operating system basic functions such as task scheduling, memory management, thread synchronization (mutexes, semaphores), etc."}),"\n",(0,r.jsx)(n.p,{children:"Device Management: Implements core logic for device initialization, status management, resource allocation, etc., such as device registration, configuration loading, etc."}),"\n",(0,r.jsx)(n.p,{children:"Communication Protocol Stack: Encapsulates upper-layer interfaces for communication protocols like Bluetooth, Wi-Fi, MQTT, HTTP, etc., providing unified network communication capabilities for applications"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Cross-Platform Abstraction Layer"}),"\n",(0,r.jsxs)(n.p,{children:["Hardware-Independent Interfaces: Defines APIs decoupled from hardware, implementing specific functions by calling drivers in the ",(0,r.jsx)(n.code,{children:"platform"})," directory."]}),"\n",(0,r.jsx)(n.p,{children:"Operating System Abstraction: Provides cross-operating system interfaces (such as thread creation, timer management), ensuring the framework can run on different OS (such as Linux, RTOS)."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Main components include:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 base/          # Basic utility library (such as logging, memory operations, data structures)\n\u251c\u2500\u2500 device/        # Device management core code\n\u251c\u2500\u2500 network/       # Network communication modules (Wi-Fi, Bluetooth, MQTT, etc.)\n\u251c\u2500\u2500 security/      # Security encryption modules (device authentication, data encryption)\n\u251c\u2500\u2500 ai/            # AI functionality interfaces (voice recognition, image analysis)\n\u251c\u2500\u2500 cloud/         # Cloud integration services (Tuya cloud API calls)\n\u2514\u2500\u2500 utils/         # General utility functions\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"apps-and-examples",children:[(0,r.jsx)(n.code,{children:"apps"})," and ",(0,r.jsx)(n.code,{children:"examples"})]}),"\n",(0,r.jsx)(n.p,{children:"Both are storage paths for engineering projects, where"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"apps"})," contains complex application projects, divided into AI applications ",(0,r.jsx)(n.code,{children:"tuya.ai"})," and IoT applications ",(0,r.jsx)(n.code,{children:"tuya_cloud"}),";"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"examples"})," contains single-function demo routines, such as WiFi, Bluetooth, buttons, etc.;"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"app_defaultconfig",children:(0,r.jsx)(n.code,{children:"app_default.config"})}),"\n",(0,r.jsxs)(n.p,{children:["The configuration file for ",(0,r.jsx)(n.code,{children:"TuyaOpen"}),", used to configure project compilation parameters"]}),"\n",(0,r.jsxs)(n.p,{children:["It should be noted that the ",(0,r.jsx)(n.code,{children:"app_default.config"})," file only saves ",(0,r.jsx)(n.strong,{children:"minimum configuration items"})]}),"\n",(0,r.jsx)(n.p,{children:"This means only configuration content different from default values is preserved"}),"\n",(0,r.jsx)(n.p,{children:"Main functions:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Compilation Parameter Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Target Platform Definition: Records the target platform/development board for current project compilation (such as T5AI, ESP32), determining the hardware drivers and compilation toolchain to load"}),"\n",(0,r.jsx)(n.p,{children:"Compilation Option Control: Contains compiler flags (such as optimization levels, macro definitions), firmware version numbers, storage partition configurations, etc."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Hardware Resource Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Peripheral Parameters: Defines hardware interface parameters (such as serial baud rate, GPIO pin allocation, SPI communication rate)"}),"\n",(0,r.jsx)(n.p,{children:"Memory Layout: Configures firmware storage addresses in Flash, RAM allocation, and other memory-related parameters"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Function Module Switches"}),"\n",(0,r.jsx)(n.p,{children:"Component Enable/Disable: Controls whether specific function modules (such as Bluetooth, Wi-Fi, AI services) are included in the project, avoiding redundant code"}),"\n",(0,r.jsx)(n.p,{children:"Function Option Configuration: Such as whether to enable OTA upgrade functionality"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"platform-and-platform_configyaml",children:[(0,r.jsx)(n.code,{children:"platform"})," and ",(0,r.jsx)(n.code,{children:"platform_config.yaml"})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"platform"})," file stores toolchain repositories, each repository needs to implement:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Hardware Abstraction Layer (HAL):"}),"\n",(0,r.jsxs)(n.p,{children:["Targeted at different chip architectures (such as ",(0,r.jsx)(n.code,{children:"ESP32"}),", ",(0,r.jsx)(n.code,{children:"BK7231N"}),", ",(0,r.jsx)(n.code,{children:"T5AI"}),", etc.), implementing underlying drivers that abstract hardware details (such as ",(0,r.jsx)(n.code,{children:"GPIO"}),", ",(0,r.jsx)(n.code,{children:"UART"}),", ",(0,r.jsx)(n.code,{children:"SPI"}),", ",(0,r.jsx)(n.code,{children:"Bluetooth/Wi-Fi"})," protocol stacks, etc.), allowing upper-layer applications to not worry about specific hardware differences."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Unified API:"}),"\n",(0,r.jsxs)(n.p,{children:["By defining standardized interfaces (such as ",(0,r.jsx)(n.code,{children:"hal_gpio_read()"}),", ",(0,r.jsx)(n.code,{children:"hal_uart_send()"}),"), upper-layer code (such as application logic in the ",(0,r.jsx)(n.code,{children:"app"})," folder) can call different hardware functions in the same way."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Due to the large space occupied by toolchain repositories, only when the project configuration requires it will the corresponding toolchain be downloaded"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"git"}),"-related information needed to download toolchains is recorded in the ",(0,r.jsx)(n.code,{children:"platform_config.yaml"})," file"]}),"\n",(0,r.jsx)(n.h2,{id:"boards",children:(0,r.jsx)(n.code,{children:"boards"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"boards"})," folder is mainly used to store configuration files and support code related to development boards. Its core function is to adapt to different hardware platforms, ensuring the TuyaOpen framework can run normally on various development boards. Here are the specific functions and content descriptions of this folder:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Configuration Files:"}),"\n",(0,r.jsxs)(n.p,{children:["Using ",(0,r.jsx)(n.code,{children:"Kconfig"})," files, configurable functions and some compilation parameters of chips or development boards are provided to developers for configuration. When using the command ",(0,r.jsx)(n.code,{children:"tos config menu"}),", they will be automatically loaded and displayed"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Target Selection:"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"boards"})," folder contains configuration files for various development boards (such as T2.config, T3.config, etc.), defining hardware parameters of target development boards (such as serial baud rate, pin allocation, memory layout, etc.). These configurations will be selected by the ",(0,r.jsx)(n.code,{children:"tos.py config choice"})," command during compilation"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Hardware Adaptation:"}),"\n",(0,r.jsxs)(n.p,{children:["For different chips (such as T2, T3, T5AI, ESP32, etc.), ",(0,r.jsx)(n.code,{children:"boards"})," may provide some underlying driver adaptation code or compilation scripts, ensuring the framework correctly interacts with hardware peripherals (such as UART, GPIO, SPI, etc.)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"tospy-and-exportsh",children:[(0,r.jsx)(n.code,{children:"tos.py"})," and ",(0,r.jsx)(n.code,{children:"export.sh"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tos.py"})," is a core command-line tool used to simplify development workflows, manage project configurations, and execute compilation and deployment operations. For detailed usage instructions, refer to: ",(0,r.jsxs)(n.a,{href:"/docs/tos-tools/tos-guide",children:[(0,r.jsx)(n.code,{children:"tos.py"})," Usage"]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"export.sh"})," and ",(0,r.jsx)(n.code,{children:"export.bat"})," are used to activate the command-line functionality of ",(0,r.jsx)(n.code,{children:"tos.py"})]}),"\n",(0,r.jsx)(n.h2,{id:"tools",children:(0,r.jsx)(n.code,{children:"tools"})}),"\n",(0,r.jsx)(n.p,{children:"Stores tool scripts, auxiliary programs, and configuration files used during development, compilation, testing, and deployment processes"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Compilation and Build Tools"}),"\n",(0,r.jsx)(n.p,{children:"Project Build Scripts: Contains scripts for compiling firmware and generating binary files (such as Makefile, CMakeLists.txt, or custom Python scripts)."}),"\n",(0,r.jsx)(n.p,{children:"Firmware Packaging Tools: Package compiled code and configuration files into distributable firmware formats (such as .bin, .ota)."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Development Auxiliary Tools"}),"\n",(0,r.jsxs)(n.p,{children:["Programming Tools: Provides tools for programming firmware to hardware devices (",(0,r.jsx)(n.code,{children:"tyutool"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"Configuration Generators: Help generate device configuration files"}),"\n",(0,r.jsx)(n.p,{children:"Code Formatting Tools: Formatting scripts to ensure consistent code style"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"temporary-files-and-directories",children:"Temporary Files and Directories"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:".venv"}),": Python virtual environment installation path"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:".build"}),": Compilation output directory, containing compiled firmware files"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,r.jsx)(n.p,{children:"To get started with TuyaOpen, you can:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"tos.py config choice"})," to select your target development board"]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"tos.py config menu"})," to configure project parameters"]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"tos.py build"})," to compile your project"]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"tos.py flash"})," to program the firmware to your device"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"subsequent-operations",children:"Subsequent Operations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Read the ",(0,r.jsxs)(n.a,{href:"/docs/tos-tools/tos-guide",children:[(0,r.jsx)(n.code,{children:"tos.py"})," Usage Guide"]})," to learn more about project management commands"]}),"\n",(0,r.jsxs)(n.li,{children:["Explore the ",(0,r.jsx)(n.code,{children:"examples"})," directory to understand basic functionality implementations"]}),"\n",(0,r.jsxs)(n.li,{children:["Check the ",(0,r.jsx)(n.code,{children:"apps"})," directory for complex application examples"]}),"\n",(0,r.jsxs)(n.li,{children:["Review the ",(0,r.jsx)(n.code,{children:"boards"})," directory to understand hardware platform configurations"]}),"\n",(0,r.jsxs)(n.li,{children:["Refer to the ",(0,r.jsx)(n.code,{children:"src"})," directory documentation for detailed API usage"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);