---
title: 智能体触发器
---
# **智能体触发器**
# **功能概述**

智能体触发器用于在设备满足特定事件条件时，**自动唤起智能体执行任务**，例如提醒用户、控制设备、联动其他系统等。

**典型智能体触发器使用场景**:

- **电量管理**：设备电量过低时自动提醒，强化用户充电意识。
- **环境监控**：根据温湿度等传感数据提醒用户执行调节空调、除湿等操作。
- **异常预警**：及时告知用户设备故障、运行异常等场景。

**与消息高级推送区别特点**：

- **规则灵活**：事件由开发者自主配置，精细化匹配 DP 条件。
- **配置简洁**：智能体仅需一键绑定已有事件，无需重复配置。
- **响应智能**：支持 Prompt 提示词自动生成智能对话。
- **体验自然**：结合智能体角色背景，给予更人性化、个性化的表达方式，提升用户交互体验。

### 使用条件

- **设备条件**：请使用 [Wukong SDK v3.12.14](https://developer.tuya.com/cn/docs/iot-device-dev/wukongai_version_release?id=Kegae21edhfyb) 及以上版本开发设备固件。
- **平台配置**：
    - 智能体已配置触发器，且对应产品的事件规则已启用。
    - 产品已关联智能体，详情请参考 [产品 AI 功能开发](https://developer.tuya.com/cn/docs/iot/AI-feature?id=Keapy1et1fc63)。

### 流程概览

1. [创建设备规则事件](https://developer.tuya.com/cn/docs/iot/agent_trigger?id=Keoimoadosdoi#DP)：配置设备事件（基于 DP 条件），如电量过低规则、声音过大规则、温度过高规则等。
2. [配置智能体触发器](https://developer.tuya.com/cn/docs/iot/agent_trigger?id=Keoimoadosdoi#Trigger)：智能体触发器关联已有事件，并设置任务执行逻辑（如发送提示话术）。
3. 运行时，设备满足触发条件，则启动触发器，用户收到智能提醒或动作执行结果。

# **创建设备规则事件**

设备事件需由开发者基于 **设备 PID** 和 **DP 条件** 自主配置，配置步骤如下：

1. 首先，前往 [涂鸦开发者平台](https://platform.tuya.com/)，单击左侧导航栏上的 **智能体** > **智能体配置** > **设备事件管理**，进入 **设备事件管理** 页面。
2. 单击页面右上角的 **创建** 前往创建事件，当前支持 **设备事件触发** 类型。
    
    ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/175127368944c9df97d69.png)
    
3. 填写设备事件的名称，并选择目标产品的 PID。选择 PID 后，可基于该 PID 的 DP 设置事件触发条件，规则仅对该 PID 下的设备生效。
4. 定义触发条件：选择定义 **通用类型的触发条件** 或 **功能点触发条件**，并添加相应的 DP 条件规则。
    
    以设置 AI 娃娃的电量过低提醒条件为例：`dp2（电量） < 20` 且 `dp3（充电状态） = none`。
    
    ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/1751271361baf32ef6301.png)
    
5. 设置触发时段（可选）：选择 **触发方式** 为 **连续触发** 或 **边缘触发**。例如，可以设置事件仅在特定时间段 `08:08 - 21:00` 内触发，避免干扰用户。
    
    ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/17510110279e24d757087.png)
    
6. 配置完成后，保存并启用事件：
    - 保存配置后，默认事件状态为 **未启用**。
    - 请务必手动启用事件，并在触发器中关联，设备运行时才可触发。
    
    ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/1751271314199937a0659.png)
    
    事件启用后，将作为选项出现在触发器配置中，可以选择使用。
    

# **配置智能体触发器**

1. 前往 [我的智能体](https://platform.tuya.com/) 页面，找到目标智能体，单击 **开发版本** 进入其开发页面。
2. 在 **01 模型能力配置** > **技能配置** > **触发器** 下，单击右侧的添加（**+**）按钮进入触发器的添加页面。
    
    ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/17549048193bc7eb843e7.png)
    
    ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/1750991500b9046272505.png)
    
3. 创建触发器：
    - **触发器名称**：填写触发器的名称。
    - **触发器类型**：选择类型为 **设备事件触发**。
4. 选择 **触发事件**：从账号下选择设备事件（如 **电量过低**）。
    - 若无可选事件，请单击 **事件配置** 进行规则创建。
    - 事件默认为未启用状态，请确保启用后才可触发。
5. 定义 **任务执行** 逻辑：默认任务为 **智能体推消息**。
    
    当前仅支持提示消息，不支持插件或工作流任务。
    
6. 编辑提示内容（Prompt）：编写提示词，作为消息内容发送给智能体。
    - 推荐根据需求明确要求回复内容的格式与要素。
    - 支持引入动态变量，如 `{{sys.dp2}}` 表示当前电量值。
    - 提示语内容应简洁明确，结合动态变量可提升用户个性化体验。
    - 可根据设备属性与使用语境，自定义提示语的语气与表达风格。
    
    ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/17510084212fdc5ec328f.png)
    
    **Prompt 示例参考**：
    
    了解更多关于 Prompt 配置的 Demo，请参考 [如何编写智能体触发器消息 Prompt](https://developer.tuya.com/cn/docs/iot/prompt_dec?id=Keoq4c2wfutjn)。
    
    | 触发场景 | 示例提示语 | Prompt 模板 |
    | --- | --- | --- |
    | 电量过低提醒 | 我快没电了，快给我充电吧～ | 你当前的电量是 `{{dp2}}%`，请你用一句话提醒我（用户）给你充电。不允许回复其他无关内容。 |
    | 温度过高提示 | 屋里太热了，能开下空调吗？ | 当前室温为 `{{dp4}}℃`，请你说一句话提醒主人降温。不允许回复其他无关内容。 |
    | 空气质量差 | 空气好差，要不要开个窗？ | 当前空气质量为 `{{dp5}}`，请你说一句提醒主人注意通风换气。不允许回复其他无关内容。 |
    | 掉线提醒 | 设备连接异常，请检查网络。 | 你掉线了，请你生成一句简洁的提示语，提醒用户检查网络。不允许回复其他无关内容。 |
7. 配置完成后，单击 **确定** 保存即可。
8. 测试执行效果：
    1. 单击触发事件的执行按钮开始调试，如下图所示：
        
        ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/1751270760424bdf4234c.png)
        
    2. 在 **模拟触发测试** 弹窗中，可输入虚拟设备 ID，并配合虚拟设备面板查看回复效果，或直接单击 **执行** 查看 AI 的响应效果。
        
        ![智能体触发器](https://images.tuyacn.com/content-platform/hestia/175127790504e4f703ee1.png)
        
        当前仅支持 **虚拟设备调试**，暂不支持真实设备测试。
        

# **即将支持**

未来将陆续支持如下更多功能扩展，敬请期待：

- 执行工作流
- 调用插件等形式的任务执行

该内容对您有帮助吗