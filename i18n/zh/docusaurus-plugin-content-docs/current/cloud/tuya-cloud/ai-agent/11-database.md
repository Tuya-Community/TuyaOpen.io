---
title: 数据库
---

# **数据库**
# **功能概述**

数据库功能是涂鸦开发者平台为 **Agent** 提供的结构化数据管理模块。它支持智能体在运行过程中，通过自然语言或系统逻辑完成 **数据的存储、读取、更新与删除** 操作。

通过数据库功能，开发者可以为 Agent 快速构建以下能力：

- 记录用户行为与日志。
- 保存个性化资料与偏好。
- 管理多用户共享数据。
- 构建业务知识库与后台数据表。

平台提供三种数据模式，满足从个人交互到协作共享的不同需求：

- **单用户模式**：每位用户拥有独立数据空间。
- **多用户模式**：用户间共享或协作同一数据集。
- **开发者模式**：后台数据由开发者维护，用户仅可查询使用。

# **数据库模式说明**

| 模式 | 典型实践场景 | 数据类型与读写逻辑 | 使用示例 |
| --- | --- | --- | --- |
| **单用户模式** | 面向个人数据记录、陪伴与成长型应用，适用于用户专属记忆、学习日志、健康记录等 | • **数据类型**：用户私有数据
• **读写逻辑**：仅本人可新增、修改、删除数据
• **隔离策略**：按用户 ID + PID + Agent 数据隔离，用户、Agent、PID 间数据互不干扰 | • **AI 玩具**：记录每日学习与成长事件，如 “今天我学会了拼积木”
• **AI 日记助手**：记录情绪、心情、每日计划
• **消费记录助手**：记录 “今天午餐花了 35 元”，并生成统计表 |
| **多用户模式** | 面向共享与互动场景，适用于任务榜单、协作互动、社交留言 | • **数据类型**：公共或群组共享数据
• **读写逻辑**：多个用户可写入
• **同步机制**：多终端、多人实时同步更新 | • **漂流瓶聊天**：所有用户共享留言池，可以随机抽取留言、提交留言
• **AI 任务广场**：用户记录每日任务完成情况并统计排名
• **班级学习榜**：展示所有成员任务完成率与积分 |
| **开发者模式** | 面向后台知识管理与数据集中维护场景，适用于产品资料、图书问答、FAQ 系统等 | • **数据类型**：由开发者统一维护
• **读写逻辑**：仅开发者可写入更新，用户仅能查询
• **权限控制**：Agent 仅具备 **只读** 权限 | • **产品资料 Agent**：后台导入产品参数、功能说明，用户通过问答方式查询
• **图书馆助手**：查询书籍作者、简介、状态
• **企业知识库**：集中维护业务知识、政策文档供查询使用 |

# **使用示例**

下文展示了三种模式在实际 Agent 场景中的典型应用。

### 单用户模式

| 示例及说明 | 对话示例 |
| --- | --- |
| **AI 玩具 · 成长记录本**：为每位用户创建独立数据表，记录每日学习与互动 | • 用户：“帮我记一下，今天我学会了拼积木。”
• Agent：“已记录：今天学习任务 - 拼积木！” |
| **AI 录音笔/日记助手**：用户以语音或文字记录会议、待办或心情日志，数据仅本人可见 | • 用户：“记一下会议要点：周五提交新版文档。”
• Agent：“已记录任务：提交新版文档。” |

**日记卡片** 示例界面：

![数据库](https://images.tuyacn.com/content-platform/hestia/1760523375f311b1ae15c.png)

### 多用户模式

| 示例及说明 | 对话示例 |
| --- | --- |
| **AI 任务广场**：多个用户共享任务数据表，系统自动统计任务完成率与排名 | • 用户：“今天我读完了两本书。”
• Agent：“太棒了！你今天任务完成率 100%，当前排名第 3。” |
| **漂流瓶聊天/公共留言板**：用户向公共表发送留言，随机被他人查看或回复 | • 用户：“我想给下一个人留言：要开心呀～”
• Agent：“留言已投出！等会儿看看谁会收到吧。” |

**家庭多用户支出助手** 示例界面：

![数据库](https://images.tuyacn.com/content-platform/hestia/17605139067a10512dbac.jpg)

### 开发者模式

| 示例及说明 | 对话示例 |
| --- | --- |
| **产品知识问答 Agent**：开发者在后台维护产品资料（规格、功能、FAQ），Agent 在对话中查询返回结果 | • 用户：“这款灯支持 Wi-Fi 吗？”
• Agent：“支持哦！该产品支持 2.4 GHz Wi-Fi 连接。” |
| **图书馆助手**：后台维护图书信息，用户通过自然语言进行检索 | • 用户：“查一下《人类简史》的作者。”
• Agent：“《人类简史》的作者是尤瓦尔 · 赫拉利。” |

**图书馆 AI 助手** 示例界面：

![数据库](https://images.tuyacn.com/content-platform/hestia/176057920492af533924d.png)

# **数据导入与测试**

| 项目 | 单用户模式 | 多用户模式 | 开发者模式 |
| --- | --- | --- | --- |
| 测试数据导入 | 不支持 | 不支持 | 支持 |
| 线上数据导入 | 不支持 | 不支持 | 支持 |

数据导入仅限 **开发者模式** 使用，导入操作需由项目管理员执行。

# **数据库操作流程**

### 创建数据库

1. 前往 **我的智能体** 页面，在目标智能体的 **操作** 栏下单击 **开发版本** 进入 Agent 编辑页面。
    
    ![数据库](https://images.tuyacn.com/content-platform/hestia/17605802525b68afec735.png)
    
2. 在 **模型能力配置** > **记忆** 下选择 **数据库**，并单击右侧的添加（**+**）按钮。
    
    ![数据库](https://images.tuyacn.com/content-platform/hestia/1760580418901bc64c34a.png)
    
3. 在 **选择数据库** 页面，点击左上角 **添加数据库**，或直接绑定右侧已有数据库。
    
    ![数据库](https://images.tuyacn.com/content-platform/hestia/1760583823a20c65c4b0c.png)
    
4. 定义数据表结构：参考以下配置说明，根据 Agent 的业务类型，定义表类型、表描述、表字段等信息。
    
    ![数据库](https://images.tuyacn.com/content-platform/hestia/1760582646a26c0bcb971.png)
    
    [Untitled](https://www.notion.so/2d1f8da2b9f580329c22dbe930a775ff?pvs=21)
    
    - AI 会根据您提供的语义智能推断数据库结构。
    - 描述越具体，生成的结构越精准（包括字段名、用途、类型）。
    - 支持多轮对话微调字段配置，系统会实时更新结构定义。
5. 填写完成后，单击 **保存**，系统将自动初始化表结构。
    
    若为 **开发者模式**，可单击 **批量导入** 导入样例数据用于测试。
    
    ![数据库](https://images.tuyacn.com/content-platform/hestia/17605960795484ec97690.png)
    

### 测试调试

进入 **Agent 调试** 步骤。您可以选择扫码调试或在线调试，以验证对话回复效果。

影响 Agent 准确调用数据库的主要因素包括：

- 数据库与字段描述的完整性：描述越清晰，AI 越能准确理解数据用途与结构。
- Agent Prompt 中数据库使用规则的明确性：在提示词中明确何种场景应执行查询或写入，并补充相应示例，有助于 AI 自动选择正确的数据库行为。

![数据库](https://images.tuyacn.com/content-platform/hestia/176059755229fdb61e599.png)