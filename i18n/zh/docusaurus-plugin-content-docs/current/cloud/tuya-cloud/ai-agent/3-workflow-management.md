---
title: 工作流管理
---
# **工作流管理**
# **概述**

工作流工具是一款用于简化和自动化业务流程的高效工作台。通过可视化界面，您可以轻松创建、管理和优化工作流，提升智能体的工作效率，减少业务幻觉。

# **创建工作流**

在 [工作流](https://platform.tuya.com/exp/workflow) 平台，单击页面右上角的 **创建工作流**，输入 **工作流名称** 及 **工作流描述**，即可快速创建工作流项目，如下所示。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/175515700231f6152067e.png)

# **配置工作流**

### 可视化工作台

如下图所示，您可以通过拖放操作，灵活构建工作流。每个节点可以定义不同的任务逻辑，便于清晰地展示整个流程。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/175515636079a5d67adfc.png)

### 开始节点

开始节点定义了启动工作流需要的信息，默认的输入变量为用户输入信息（`USER_TEXT`）。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/1755154270b3b8706e640.png)

您可以通过单击 **添加节点** 来添加以下节点以构建工作流：

- [意图识别节点](https://developer.tuya.com/cn/docs/iot/ai-agent-workflow?id=Keak4gh7rdhd2#recognition)
- [大模型节点](https://developer.tuya.com/cn/docs/iot/ai-agent-workflow?id=Keak4gh7rdhd2#llm)
- [输出节点](https://developer.tuya.com/cn/docs/iot/ai-agent-workflow?id=Keak4gh7rdhd2#output)

### 意图识别节点

意图识别节点用于快速识别和管理用户输入内容的意图。通过设置意图识别模型，系统可以准确理解用户的输入内容并进行相应的意图分类。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/1755150705a0e497f31a4.png)

您可以选择定义意图识别模型为 **极速模式** 或者 **完整模式**：

**极速模式**：

- **模型**：选择合适的模型。
- **输入**：设置用于做意图识别判断的参数（常用输入参数为 “用户输入”，即 `USER_TEXT`）。
- **意图识别**：设置需要识别的意图，用于与用户输入匹配的意图选项。
- **异常处理**：可设置异常处理，包括超时时间、是否重试、和异常处理方式。

**完整模式**：

完整模式在极速模式的基础上，增加了 **系统提示词** 功能，支持引入变量，使输入的内容可以被系统提示词理解，辅助系统更深入的理解用户意图。

### 大模型节点

大模型节点是一个基于大规模语言模型的智能对话系统，支持通过变量和提示词配置生成高质量的对话回复。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/1755152569d14a51a5d61.png)

- **会话历史**：开启会话历史功能后，会自动把会话上下文信息发送给模型，使用户输入保持上下文连贯性。
- **输入**：输入需要添加到提示词的信息，这些信息可以被下方的提示词引用，支持动态引用变量。
- **模型**：选择合适的模型。
- **系统提示词**：用于设定模型基础行为，比如角色描述、举例参考、输出限制等，支持引用变量的语法。
- **用户提示词**：模型提供用户指令，如查询或任何基于文本输入的提问，常引用用户输入变量作为提示词，即：`USER_TEXT`。
- **输出**：将大模型的输出内容作为变量的值，为大模型运行完成后生成的内容。
- **异常处理**：可设置异常处理，包括超时时间、是否重试、和异常处理方式。

### 输出节点

输出节点是一个支持中间过程和消息输出的功能组件，具备流式和非流式两种输出方式，用以提供灵活的数据输出方案。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/17551544153c5c451a030.png)

- **输入变量**：支持动态引用变量。
- **输出内容**：输出内容支持引用变量的语法。支持开启 **流式输出**，开启后，回复内容中的大语言模型的生成内容将会逐字流式输出

### 结束节点

用于结束逻辑的节点，配置方式与输出节点一致。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/1755155123e64b3147020.png)

限制：如果有逻辑分支未收束到结束节点，则工作流无法运行。

# **试运行**

选择与工作流中设置的大模型相匹配的数据大区，并在 `USER_TEXT` 中模拟用户输入的内容，即可开启试运行，从而得到输出结果。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/1755155397e3c05b66c0b.png)

# **发布工作流**

配置完成后，单击工作台右上角的 **发布** 来发布已构建的工作流，如下图所示。为保证工作流的逻辑完整，涂鸦会对工作流进行逻辑校验。逻辑被校验通过后，工作流即发布完成。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/175515612584077daa16f.png)

当工作流发布完成后，即可在智能体中开启工作流模式，以选择构建的工作流，并单击 **添加工作流** 来添加此工作流，如下图所示。

![工作流管理](https://images.tuyacn.com/content-platform/hestia/1755156257c92b0d016d0.png)