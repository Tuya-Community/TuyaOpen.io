---
title: "LEDåƒç´ è‰ºæœ¯ç¯çŸ©é˜µ"
date: 2025-9-28
---

<BackToProjects />


# ğŸŒˆ LEDåƒç´ çŸ©é˜µï¼šä½¿ç”¨TuyaOpenåˆ›å»ºå½©è‰²å¹»ç¯çŸ©é˜µ

*è¿™æ˜¯å•çº¿LEDçŸ©é˜µç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚åœ¨æœªæ¥çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•å°†å…¶è½¬æ¢ä¸ºå®Œæ•´çš„IoTé¡¹ç›®ï¼*

## ğŸš€ å…³äºTuyaOpen

æœ¬é¡¹ç›®ä½¿ç”¨**TuyaOpen**æ„å»ºï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºAI+IoTå¼€å‘æ¡†æ¶ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿåˆ›å»ºæ™ºèƒ½è¿æ¥è®¾å¤‡ã€‚TuyaOpenæ”¯æŒå¤šç§èŠ¯ç‰‡å¹³å°å’ŒRTOSç±»æ“ä½œç³»ç»Ÿï¼Œæ— ç¼é›†æˆå¤šæ¨¡æ€AIåŠŸèƒ½ï¼ŒåŒ…æ‹¬éŸ³é¢‘ã€è§†é¢‘å’Œä¼ æ„Ÿå™¨æ•°æ®å¤„ç†ã€‚

**TuyaOpençš„ä¸»è¦ç‰¹æ€§ï¼š**
- **å¤šå¹³å°æ”¯æŒ**ï¼šT5AIã€ESP32ã€LN882Hç­‰
- **AIé›†æˆ**ï¼šè¯­éŸ³è¯†åˆ«ã€LLMé›†æˆå’Œå¤šæ¨¡æ€AI
- **äº‘è¿æ¥**ï¼šä¸Tuyaäº‘æœåŠ¡æ— ç¼é›†æˆ
- **è·¨å¹³å°å¼€å‘**ï¼šæ”¯æŒC/C++ã€Arduinoã€Luaå’ŒMicroPython
- **ä¸°å¯Œçš„å¤–è®¾é©±åŠ¨**ï¼šå…¨é¢çš„ç¡¬ä»¶æŠ½è±¡å±‚
- **å¼€å‘ç¯å¢ƒ**ï¼šæ”¯æŒMacOS/Windows/Linuxæ“ä½œç³»ç»Ÿ

**ğŸ“š äº†è§£æ›´å¤šï¼š**
- **å®˜æ–¹æ–‡æ¡£**ï¼š[TuyaOpenæ–‡æ¡£](https://www.tuyaopen.ai/zh/docs/about-tuyaopen)
- **GitHubä»“åº“**ï¼š[TuyaOpen on GitHub](https://github.com/tuya/TuyaOpen)
- **æºä»£ç **ï¼š[LEDåƒç´ çŸ©é˜µç¤ºä¾‹](https://github.com/tuya/TuyaOpen/tree/master/examples/peripherals/leds-pixel)
- **ç¤¾åŒº**ï¼šåŠ å…¥TuyaOpenç¤¾åŒºè·å¾—æ”¯æŒå’Œåä½œ

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æ¬¢è¿æ¥åˆ°ç»ˆæLEDåƒç´ çŸ©é˜µå†’é™©ï¼æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨ä½¿ç”¨TuyaOpen SDKæ„å»ºä»¤äººéš¾ä»¥ç½®ä¿¡çš„16x16 LEDçŸ©é˜µæ˜¾ç¤ºå™¨ã€‚æˆ‘ä»¬å°†åˆ›å»ºä»ç®€å•é¢œè‰²æ•ˆæœåˆ°å¤æ‚åŠ¨ç”»ã€æ»šåŠ¨æ–‡æœ¬ï¼Œç”šè‡³ä¼šè®©æ‚¨æƒŠå¹çš„æ•°å­¦å›¾æ¡ˆï¼

![LEDçŸ©é˜µåŠ¨ç”»](https://images.tuyacn.com/fe-static/docs/img/40c94bdf-cab2-4069-9298-862c7be9e315.gif)  
  *16x16 LEDçŸ©é˜µä¸Šè¿è¡Œçš„æ‰€æœ‰åŠ¨ç”»æ•ˆæœ - ä»å‘¼å¸é¢œè‰²åˆ°2Dæ³¢æµªã€æ»šåŠ¨æ–‡æœ¬ç­‰ç­‰ï¼*

## ğŸš€ æ‚¨å°†æ„å»ºä»€ä¹ˆ

åœ¨æœ¬æ•™ç¨‹ç»“æŸæ—¶ï¼Œæ‚¨å°†åˆ›å»ºï¼š

- **16x16 LEDçŸ©é˜µæ˜¾ç¤ºå™¨**ï¼ˆ256ä¸ªç‹¬ç«‹å¯å¯»å€LEDï¼ï¼‰
- **8ç§ä¸åŒçš„åŠ¨ç”»æ•ˆæœ**ï¼ŒåŒ…æ‹¬æ³¢æµªã€æ¶Ÿæ¼ªå’Œæ–‡æœ¬æ»šåŠ¨
- **å®æ—¶é¢œè‰²ç®¡ç†**ï¼Œå…·æœ‰HSVåˆ°RGBè½¬æ¢
- **è‡ªå®šä¹‰å­—ä½“æ¸²æŸ“**ï¼Œç”¨äºæ»šåŠ¨æ–‡æœ¬æ¶ˆæ¯
- **æ•°å­¦å›¾æ¡ˆç”Ÿæˆ**ï¼Œä½¿ç”¨ä¸‰è§’å‡½æ•°å’Œæ³¢æµªå‡½æ•°

## ğŸ› ï¸ ç¡¬ä»¶è¦æ±‚

### æ ¸å¿ƒç»„ä»¶
- **Tuya T5AIå¼€å‘æ¿**ï¼ˆT5AI-Coreæˆ–T5AI-Boardï¼‰
- **16x16 WS2812B LEDçŸ©é˜µ**ï¼ˆæ€»å…±256ä¸ªLEDï¼‰
- **è·³çº¿**ç”¨äºè¿æ¥
- **5Vç”µæº**ï¼ˆèƒ½å¤Ÿæä¾›5V@3A+ä»¥æ”¯æŒå…¨äº®åº¦ï¼‰
- **é¢åŒ…æ¿**ï¼ˆå¯é€‰ï¼Œç”¨äºåŸå‹åˆ¶ä½œï¼‰

### ğŸ¯ **T5AIç¡¬ä»¶é€‰é¡¹**

æ­¤æ¼”ç¤ºä¸“ä¸º**T5AI-Core**å¼€å‘æ¿è®¾è®¡ï¼Œä½†æ‰€æœ‰T5ç³»åˆ—æ¿éƒ½å…¼å®¹ã€‚é€‰æ‹©æœ€é€‚åˆæ‚¨é¡¹ç›®éœ€æ±‚çš„æ¿å­ï¼š

#### **T5AI-Core**ï¼ˆæ­¤é¡¹ç›®æ¨èï¼‰
- **ç´§å‡‘è®¾è®¡**ï¼šå°å°ºå¯¸ï¼Œéå¸¸é€‚åˆé¢åŒ…æ¿åŸå‹åˆ¶ä½œ
- **44é’ˆæ¥å¤´**ï¼šæ˜“äºè¿æ¥åˆ°LEDçŸ©é˜µå’Œå…¶ä»–å¤–è®¾
- **ç”µæ± ç®¡ç†**ï¼šå†…ç½®é”‚ç”µæ± æ”¯æŒ
- **éŸ³é¢‘åŠŸèƒ½**ï¼š2é€šé“éº¦å…‹é£+1é€šé“æ‰¬å£°å™¨
- **å®Œç¾é€‚ç”¨äº**ï¼šLEDé¡¹ç›®ã€IoTåŸå‹ã€åµŒå…¥å¼å¼€å‘

**ğŸ“š ç¡¬ä»¶æ–‡æ¡£**ï¼š[T5AI-Coreæ¦‚è¿°](https://tuyaopen.ai/zh/docs/hardware-specific/t5-ai-core/overview-t5-ai-core)

#### **T5AI-Board**ï¼ˆå…¨åŠŸèƒ½é€‰é¡¹ï¼‰
- **å®Œæ•´å¼€å‘å¥—ä»¶**ï¼šå…·æœ‰æ‰€æœ‰åŠŸèƒ½çš„å®Œæ•´å¼€å‘æ¿
- **å¯é€‰LCDå±å¹•**ï¼š3.5è‹±å¯¸è§¦æ‘¸å±æ”¯æŒ
- **æ‘„åƒå¤´æ¨¡å—**ï¼šDVPæ‘„åƒå¤´æ¥å£
- **ä¸°å¯Œçš„I/O**ï¼š56ä¸ªGPIOå¼•è„šï¼Œå¤šä¸ªæ¥å£
- **å®Œç¾é€‚ç”¨äº**ï¼šå¤æ‚é¡¹ç›®ã€å¤šåª’ä½“åº”ç”¨ã€AIå¼€å‘

**ğŸ“š ç¡¬ä»¶æ–‡æ¡£**ï¼š[T5AI-Boardæ¦‚è¿°](https://tuyaopen.ai/zh/docs/hardware-specific/t5-ai-board/overview-t5-ai-board)

### ğŸ›’ **è·å–ç¡¬ä»¶**

**å®˜æ–¹TuyaOpenç¡¬ä»¶å•†åº—**ï¼š[è·å–ç¡¬ä»¶](https://tuyaopen.ai/zh/get-hardware)


## ğŸ”Œ æ¥çº¿å›¾

è¿™ä¸ªé¡¹ç›®çš„ç¾ä¸½åœ¨äºå…¶ç®€å•æ€§ - åªéœ€**ä¸€æ ¹æ•°æ®çº¿**æ§åˆ¶æ‰€æœ‰256ä¸ªLEDï¼

![LEDçŸ©é˜µæ¥çº¿å’Œå¸ƒå±€](https://images.tuyacn.com/fe-static/docs/img/f1399919-33ad-4a77-92c2-73a878982d35.jpg)

*T5AI Coreæ¿è¿æ¥åˆ°16x16 LEDçŸ©é˜µï¼ŒåŒ…å«åæ ‡ç³»å’Œæ¥çº¿å›¾*

| T5AI Coreæ¿å¼•è„š | LEDçŸ©é˜µå¼•è„š | å¤–éƒ¨ç”µæº |
|-----------------|-------------|----------|
| SPI0_MISO (P16) | æ•°æ®è¾“å…¥    |          |
| -               | VCC         | +5V      |
| GND             | GND         | GND      |

**é‡è¦æ³¨æ„äº‹é¡¹ï¼š**
- å°†LEDçŸ©é˜µæ•°æ®çº¿è¿æ¥åˆ°**SPI0_MISO**å¼•è„š
- ä¸ºLEDä½¿ç”¨å•ç‹¬çš„5Vç”µæºï¼ˆä¸è¦ä»æ¿å­ä¾›ç”µï¼‰
- ç¡®ä¿ç”µæºå’Œæ¿å­ä¹‹é—´çš„æ­£ç¡®æ¥åœ°

## ğŸ’» è½¯ä»¶æ¶æ„

### é¡¹ç›®ç»“æ„
```
leds-pixel/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ example_led-pixels.c    # ä¸»åº”ç”¨ç¨‹åºé€»è¾‘
â”‚   â””â”€â”€ led_font.h             # 8x8å­—ä½“æ•°æ®åº“
â”œâ”€â”€ include/
â”‚   â””â”€â”€ example_led-pixels.h   # å¤´æ–‡ä»¶å®šä¹‰
â”œâ”€â”€ config/
â”‚   â””â”€â”€ TUYA_T5AI_CORE.config  # æ¿é…ç½®
â””â”€â”€ CMakeLists.txt             # æ„å»ºé…ç½®
```

### å…³é”®ç»„ä»¶

#### 1. **LEDé©±åŠ¨ç³»ç»Ÿ**
é¡¹ç›®ä½¿ç”¨Tuyaçš„åƒç´ é©±åŠ¨æ¡†æ¶ï¼Œæ”¯æŒå¤šç§LEDç±»å‹ï¼š
- WS2812Bï¼ˆé»˜è®¤ï¼‰
- SK6812
- SM16703P
- YX1903B

#### 2. **çŸ©é˜µåæ ‡ç³»**
```c
// 16x16 LEDçŸ©é˜µå¸ƒå±€ï¼Œé‡‡ç”¨é”¯é½¿å½¢æ¨¡å¼
// åæ ‡ï¼š(0,0) = å·¦ä¸Šè§’ï¼Œ(15,15) = å³ä¸‹è§’
// LEDç´¢å¼•éµå¾ªåŸºäºåˆ—çš„é”¯é½¿å½¢æ¨¡å¼
```

#### 3. **é¢œè‰²ç®¡ç†**
- **åˆ†è¾¨ç‡**ï¼šæ¯ä¸ªé¢œè‰²é€šé“1000çº§
- **é¢œè‰²ç©ºé—´**ï¼šRGB + æš–/å†·ç™½
- **æ•ˆæœ**ï¼šHSVåˆ°RGBè½¬æ¢ï¼Œå®ç°å¹³æ»‘é¢œè‰²è¿‡æ¸¡

## ğŸ¨ åŠ¨ç”»æ•ˆæœæ·±åº¦è§£æ

LEDçŸ©é˜µæ¼”ç¤ºåŒ…å«å¤šç§ä»¤äººæƒŠå¹çš„åŠ¨ç”»æ•ˆæœã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå…³é”®ç¤ºä¾‹ï¼Œå±•ç¤ºäº†è§†è§‰é­”æ³•èƒŒåçš„æ•°å­¦å’Œç¼–ç¨‹æ¦‚å¿µï¼š

### 1. **å‘¼å¸é¢œè‰²æ•ˆæœ**
```c
static void __breathing_color_effect(void)
{
    OPERATE_RET rt = OPRT_OK;
    PIXEL_COLOR_T current_color = {0};
    uint32_t step = 20;
    uint32_t max_cycles = 3;
    uint32_t color_num = CNTSOF(cCOLOR_ARR);

    // ç”¨äºé€å¸§åŠ¨ç”»çš„é™æ€å˜é‡
    static uint32_t static_intensity = 0;
    static int32_t static_direction = 1;
    static uint32_t static_cycle_count = 0;
    static uint32_t static_color_index = 0;
    static bool animation_complete = false;

    // åŠ¨ç”»å®Œæˆæ—¶é‡ç½®
    if (animation_complete) {
        static_intensity = 0;
        static_direction = 1;
        static_cycle_count = 0;
        static_color_index = 0;
        animation_complete = false;
    }

    // å•å¸§æ›´æ–°
    static_intensity += (static_direction * step);

    if (static_intensity >= COLOR_RESOLUION) {
        static_intensity = COLOR_RESOLUION;
        static_direction = -1;
    } else if (static_intensity <= 0) {
        static_intensity = 0;
        static_direction = 1;
        static_cycle_count++;
        static_color_index = (static_color_index + 1) % color_num;

        if (static_cycle_count >= max_cycles) {
            animation_complete = true;
        }
    }

    current_color.red = (cCOLOR_ARR[static_color_index].red * static_intensity) / COLOR_RESOLUION;
    current_color.green = (cCOLOR_ARR[static_color_index].green * static_intensity) / COLOR_RESOLUION;
    current_color.blue = (cCOLOR_ARR[static_color_index].blue * static_intensity) / COLOR_RESOLUION;
    current_color.warm = (cCOLOR_ARR[static_color_index].warm * static_intensity) / COLOR_RESOLUION;
    current_color.cold = (cCOLOR_ARR[static_color_index].cold * static_intensity) / COLOR_RESOLUION;

    TUYA_CALL_ERR_GOTO(tdl_pixel_set_single_color(sg_pixels_handle, 0, LED_PIXELS_TOTAL_NUM, &current_color), __ERROR);
    TUYA_CALL_ERR_GOTO(tdl_pixel_dev_refresh(sg_pixels_handle), __ERROR);

__ERROR:
    PR_ERR("breathing color effect error");
    return;
}
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- åœ¨æ‰€æœ‰LEDä¸Šåˆ›å»ºå¹³æ»‘çš„å‘¼å¸æ•ˆæœ
- å¾ªç¯æ˜¾ç¤ºä¸»è¦é¢œè‰²ï¼ˆçº¢â†’ç»¿â†’è“ï¼‰
- ä½¿ç”¨å¼ºåº¦è°ƒåˆ¶å®ç°"å‘¼å¸"æ•ˆæœ
- æ¼”ç¤ºå¹³æ»‘é¢œè‰²è¿‡æ¸¡å’Œæ—¶åºæ§åˆ¶

**æŠ€æœ¯å®ç°ï¼š**
- **å¼ºåº¦è°ƒåˆ¶**ï¼šä½¿ç”¨æ­£å¼¦æ³¢å‡½æ•°å®ç°å¹³æ»‘æ·¡å…¥/æ·¡å‡º
- **é¢œè‰²å¾ªç¯**ï¼šåœ¨é¢„å®šä¹‰é¢œè‰²æ•°ç»„ä¹‹é—´è¿‡æ¸¡
- **å¸§ç®¡ç†**ï¼šé™æ€å˜é‡åœ¨å¸§ä¹‹é—´ç»´æŠ¤åŠ¨ç”»çŠ¶æ€

### 2. **2Dæ³¢æµªæ•ˆæœ**
```c
static void __2d_wave_effect(void)
{
    OPERATE_RET rt = OPRT_OK;
    PIXEL_COLOR_T tinted_color = {0};
    uint32_t max_cycles = 2;  // å‡å°‘å¾ªç¯ä»¥åŒ¹é…å…¶ä»–æ•ˆæœ
    float max_radius = 11.0f; // è¦†ç›–16x16çŸ©é˜µçš„æœ€å¤§åŠå¾„
    float wave_speed = 0.5f;  // æ›´å¿«çš„æ³¢æµªé€Ÿåº¦ä»¥å®ç°æ›´å¹³æ»‘çš„è¿‡æ¸¡
    float color_saturation = 1.0f;
    float color_value = 1.0f;

    // ç”¨äºé€å¸§åŠ¨ç”»çš„é™æ€å˜é‡
    static uint32_t static_cycle_count = 0;
    static float static_wave_radius = 0.0f;
    static float static_color_hue = 0.0f;
    static bool animation_complete = false;

    // åŠ¨ç”»å®Œæˆæ—¶é‡ç½®
    if (animation_complete) {
        static_cycle_count = 0;
        static_wave_radius = 0.0f;
        static_color_hue = 0.0f;
        animation_complete = false;
    }

    // ä¸ºæ¯å¸§æ¸…é™¤LED
    PIXEL_COLOR_T off_color = {0};
    TUYA_CALL_ERR_GOTO(tdl_pixel_set_single_color(sg_pixels_handle, 0, LED_PIXELS_TOTAL_NUM, &off_color), __ERROR);

    // è®¡ç®—å½“å‰æ³¢æµªåŠå¾„
    static_wave_radius += wave_speed;
    if (static_wave_radius > max_radius) {
        static_wave_radius = 0.0f;
        static_cycle_count++;

        if (static_cycle_count >= max_cycles) {
            animation_complete = true;
        }
    }

    // ä¸­å¿ƒå¤„çš„è¿ç»­é¢œè‰²å…‰è°±è¿‡æ¸¡
    static_color_hue += 2.0f; // æ›´å¿«çš„é¢œè‰²è¿‡æ¸¡ä»¥å®ç°æ›´å¹³æ»‘çš„æ•ˆæœ
    if (static_color_hue >= 360.0f) {
        static_color_hue = 0.0f;
    }

    // åŸºäºå…‰è°±çš„åŸºç¡€é¢œè‰²åœ¨ä¸‹é¢çš„å¾ªç¯ä¸­ä¸ºæ¯ä¸ªLEDè®¡ç®—

    // å¯¹æ¯ä¸ªLEDåº”ç”¨æ³¢æµªæ•ˆæœ
    for (uint32_t y = 0; y < 16; y++) {
        for (uint32_t x = 0; x < 16; x++) {
            float distance = __distance_from_center(x, y);
            float angle = __calculate_angle(x, y);

            // æ£€æŸ¥LEDæ˜¯å¦åœ¨æ‰©å±•æ³¢æµªå†…
            if (distance <= static_wave_radius) {
                // åŸºäºè·ä¸­å¿ƒè·ç¦»è®¡ç®—è‰²è°ƒï¼Œå®ç°æ’å®šé¢œè‰²å¸¦
                float distance_hue = (distance / max_radius) * 180.0f; // å‡å°‘èŒƒå›´ä»¥å®ç°æ›´å¹³æ»‘çš„è¿‡æ¸¡
                float current_hue = static_color_hue - distance_hue;   // è‰²è°ƒåŸºäºè·ç¦»åç§»
                if (current_hue < 0.0f)
                    current_hue += 360.0f;

                // å°†è‰²è°ƒè½¬æ¢ä¸ºRGBä»¥å®ç°æ’å®šé¢œè‰²
                float h = current_hue / 60.0f;
                float c = color_value * color_saturation;
                float x_val = c * (1.0f - fabsf(fmodf(h, 2.0f) - 1.0f));
                float m = color_value - c;

                float r, g, b;
                if (h < 1.0f) {
                    r = c;
                    g = x_val;
                    b = 0;
                } else if (h < 2.0f) {
                    r = x_val;
                    g = c;
                    b = 0;
                } else if (h < 3.0f) {
                    r = 0;
                    g = c;
                    b = x_val;
                } else if (h < 4.0f) {
                    r = 0;
                    g = x_val;
                    b = c;
                } else if (h < 5.0f) {
                    r = x_val;
                    g = 0;
                    b = c;
                } else {
                    r = c;
                    g = 0;
                    b = x_val;
                }

                // è®¾ç½®æ’å®šé¢œè‰²ï¼ˆæ— å¼ºåº¦è¡°å‡ï¼‰
                tinted_color.red = (uint32_t)((r + m) * COLOR_RESOLUION);
                tinted_color.green = (uint32_t)((g + m) * COLOR_RESOLUION);
                tinted_color.blue = (uint32_t)((b + m) * COLOR_RESOLUION);
                tinted_color.warm = 0;
                tinted_color.cold = 0;

                // åº”ç”¨8æ–¹å‘ç€è‰²
                __apply_directional_tint(&tinted_color, angle, &tinted_color);

                // è®¾ç½®LEDé¢œè‰²
                uint32_t led_index = __matrix_coord_to_led_index(x, y);
                if (led_index > 0 && led_index <= LED_PIXELS_TOTAL_NUM) {
                    TUYA_CALL_ERR_GOTO(tdl_pixel_set_single_color(sg_pixels_handle, led_index, 1, &tinted_color),
                                       __ERROR);
                }
            }
        }
    }

    TUYA_CALL_ERR_GOTO(tdl_pixel_dev_refresh(sg_pixels_handle), __ERROR);

__ERROR:
    PR_ERR("2D wave effect error");
    return;
}
```

**æ•°å­¦é­”æ³•ï¼š**
- **è·ç¦»è®¡ç®—**ï¼šä»çŸ©é˜µä¸­å¿ƒ`sqrt((x-7.5)Â² + (y-7.5)Â²)`
- **æ³¢æµªä¼ æ’­**ï¼šåŸºäºæ—¶é—´çš„åŠ¨ç”»æ‰©å±•åŠå¾„
- **é¢œè‰²ç€è‰²**ï¼šåŸºäºè§’åº¦çš„8æ–¹å‘é¢œè‰²å˜åŒ–
- **HSVé¢œè‰²ç©ºé—´**ï¼šä½¿ç”¨è‰²è°ƒã€é¥±å’Œåº¦ã€å€¼å®ç°å¹³æ»‘é¢œè‰²è¿‡æ¸¡
- **ä¸‰è§’å‡½æ•°**ï¼šä½¿ç”¨`atan2()`è¿›è¡Œè§’åº¦è®¡ç®—
- **é¢œè‰²å…‰è°±**ï¼šè¿ç»­è‰²è°ƒæ—‹è½¬å®ç°å½©è™¹æ•ˆæœ
- **æ–¹å‘ç€è‰²**ï¼šåŸºäºæŒ‡å—é’ˆæ–¹å‘çš„ä¸åŒé¢œè‰²

### æ›´å¤šåŠ¨ç”»æ•ˆæœ

æ¼”ç¤ºä»£ç åº“åŒ…å«å‡ ä¸ªé¢å¤–çš„åŠ¨ç”»æ•ˆæœï¼Œå±•ç¤ºäº†ä¸åŒçš„ç¼–ç¨‹æŠ€æœ¯ï¼š

- **æ»šåŠ¨æ–‡æœ¬**ï¼š8x8å­—ä½“æ¸²æŸ“ï¼Œå½©è™¹é¢œè‰²
- **æ¶Ÿæ¼ªæ•ˆæœ**ï¼šä½¿ç”¨æ­£å¼¦æ³¢æ•°å­¦çš„æ°´æ ·æ¶Ÿæ¼ª
- **é›ªèŠ±å›¾æ¡ˆ**ï¼š6é‡æ—‹è½¬å¯¹ç§°ï¼Œæ•°å­¦ç²¾åº¦
- **æ‰«æåŠ¨ç”»**ï¼šåˆ—å’Œè¡Œæ‰«ææ¨¡å¼
- **å‘¼å¸åœ†åœˆ**ï¼šè„‰åŠ¨åœ†å½¢å›¾æ¡ˆï¼Œé¢œè‰²å¾ªç¯
- **è·‘é©¬ç¯**ï¼šé¡ºåºLEDæ¿€æ´»ï¼Œé¢œè‰²è¿‡æ¸¡
- **é¢œè‰²æ³¢æµª**ï¼šçŸ©é˜µä¸Šçš„ä¼ æ’­æ³¢æµªæ•ˆæœ

æ¯ä¸ªæ•ˆæœéƒ½æ¼”ç¤ºäº†åµŒå…¥å¼ç¼–ç¨‹çš„ä¸åŒæ–¹é¢ï¼Œä»åŸºæœ¬LEDæ§åˆ¶åˆ°è§†è§‰æ•ˆæœçš„é«˜çº§æ•°å­¦ç®—æ³•ã€‚

## ğŸ”§ ä»£ç è§£æ

### çŸ©é˜µåæ ‡è½¬æ¢

![åŠ¨ç”»å±•ç¤º - LEDçŸ©é˜µä¸Šè¿è¡Œçš„å¤šç§æ•ˆæœ](https://images.tuyacn.com/fe-static/docs/img/b48dd519-0cb5-452f-a713-9e79c12baf28.png)

LEDçŸ©é˜µåœ¨ç‰©ç†ä¸Šæ˜¯2Dç½‘æ ¼ï¼ˆ16x16ï¼‰ï¼Œä½†LEDä»¥å•é“¾æ–¹å¼è¿æ¥ï¼Œå› æ­¤éœ€è¦ä¸€ç§æ–¹æ³•å°†(x, y)åæ ‡è½¬æ¢ä¸ºæ­£ç¡®çš„1D LEDç´¢å¼•ã€‚è¿™ç”±`__matrix_coord_to_led_index`å‡½æ•°å¤„ç†ã€‚

#### é”¯é½¿å½¢ï¼ˆè›‡å½¢ï¼‰æ˜ å°„è¯´æ˜

- **å¶æ•°åˆ—ï¼ˆx % 2 == 0ï¼‰ï¼š**  
  å¶æ•°åˆ—ä¸­çš„LEDä»ä¸Šåˆ°ä¸‹è¿æ¥ã€‚  
  - ç´¢å¼•è®¡ç®—ä¸ºï¼š`index = x * 16 + y`
- **å¥‡æ•°åˆ—ï¼ˆx % 2 == 1ï¼‰ï¼š**  
  å¥‡æ•°åˆ—ä¸­çš„LEDä»ä¸‹åˆ°ä¸Šè¿æ¥ã€‚  
  - ç´¢å¼•è®¡ç®—ä¸ºï¼š`index = (x + 1) * 16 - 1 - y`

è¿™ç§æ¨¡å¼ç¡®ä¿é€»è¾‘(x, y)åæ ‡å§‹ç»ˆæ˜ å°„åˆ°æ­£ç¡®çš„ç‰©ç†LEDï¼Œæ— è®ºæ¯åˆ—ä¸­çš„è¿æ¥æ–¹å‘å¦‚ä½•ã€‚

**ç¤ºä¾‹ï¼š**
- (x=0, y=0) â†’ ç´¢å¼•0ï¼ˆå·¦ä¸Šè§’ï¼‰
- (x=0, y=15) â†’ ç´¢å¼•15ï¼ˆç¬¬ä¸€åˆ—åº•éƒ¨ï¼‰
- (x=1, y=0) â†’ ç´¢å¼•31ï¼ˆç¬¬äºŒåˆ—é¡¶éƒ¨ï¼Œå› ä¸ºå®ƒæ˜¯åå‘çš„ï¼‰
- (x=1, y=15) â†’ ç´¢å¼•16ï¼ˆç¬¬äºŒåˆ—åº•éƒ¨ï¼‰

è¿™ç§æ˜ å°„å¯¹äºåœ¨çŸ©é˜µä¸Šæ­£ç¡®æ˜¾ç¤ºå›¾åƒã€åŠ¨ç”»æˆ–æ–‡æœ¬è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒæŠ½è±¡äº†ç‰©ç†è¿æ¥ï¼Œè®©æ‚¨å¯ä»¥åœ¨ä»£ç ä¸­è‡ªç„¶åœ°ä½¿ç”¨(x, y)åæ ‡ã€‚

```c
static uint32_t __matrix_coord_to_led_index(uint32_t x, uint32_t y)
{
    // å°†2DçŸ©é˜µåæ ‡è½¬æ¢ä¸º1D LEDç´¢å¼•
    // å¤„ç†é”¯é½¿å½¢æ¨¡å¼ä»¥æ­£ç¡®å¯»å€LED
    if (x % 2 == 0) {
        // å¶æ•°åˆ—ï¼šä»ä¸Šåˆ°ä¸‹
        led_index = (x * 16 + y);
    } else {
        // å¥‡æ•°åˆ—ï¼šä»ä¸‹åˆ°ä¸Š
        led_index = (x + 1) * 16 - 1 - y;
    }
    return led_index;
}
```

### é¢œè‰²ç®¡ç†
```c
// HSVåˆ°RGBè½¬æ¢ï¼Œå®ç°å¹³æ»‘é¢œè‰²è¿‡æ¸¡
float h = hue / 60.0f;
float c = saturation * value;
float x = c * (1.0f - fabsf(fmodf(h, 2.0f) - 1.0f));
// ... åŸºäºè‰²è°ƒæ‰‡åŒºçš„RGBè®¡ç®—
```

### åŠ¨ç”»çŠ¶æ€ç®¡ç†
```c
// ä½¿ç”¨é™æ€å˜é‡çš„é€å¸§åŠ¨ç”»
static uint32_t frame_count = 0;
static float wave_radius = 0.0f;
static bool animation_complete = false;

// åŠ¨ç”»å®Œæˆæ—¶é‡ç½®
if (animation_complete) {
    frame_count = 0;
    wave_radius = 0.0f;
    animation_complete = false;
}
```

## ğŸ›ï¸ é…ç½®å’Œè‡ªå®šä¹‰

### LEDé©±åŠ¨é€‰æ‹©
```c
// é€šè¿‡å–æ¶ˆæ³¨é‡Šç›¸åº”çš„é©±åŠ¨æ¥é€‰æ‹©æ‚¨çš„LEDç±»å‹
TUYA_CALL_ERR_RETURN(tdd_ws2812_driver_register(device_name, &dev_init_cfg));
// TUYA_CALL_ERR_RETURN(tdd_sk6812_driver_register(device_name, &dev_init_cfg));
// TUYA_CALL_ERR_RETURN(tdd_sm16703p_driver_register(device_name, &dev_init_cfg));
```

### æ•ˆæœè‡ªå®šä¹‰
```c
// ä¿®æ”¹æ•ˆæœå‚æ•°
#define LED_PIXELS_TOTAL_NUM 256    // æ€»LEDæ•°é‡
#define LED_CHANGE_TIME      800    // æ•ˆæœæ—¶åºï¼ˆæ¯«ç§’ï¼‰
#define COLOR_RESOLUION      1000u  // é¢œè‰²æ·±åº¦
```

### åŠ¨ç”»æ—¶åº
```c
// è°ƒæ•´åŠ¨ç”»é€Ÿåº¦å’ŒæŒç»­æ—¶é—´
static uint32_t max_cycles_per_effect = 200;  // æ•ˆæœæŒç»­æ—¶é—´
tal_system_sleep(50);  // å¸§å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
```

## ğŸš€ æ„å»ºå’Œçƒ§å½•

### å…ˆå†³æ¡ä»¶

åœ¨æ„å»ºæ­¤é¡¹ç›®ä¹‹å‰ï¼Œæ‚¨éœ€è¦è®¾ç½®TuyaOpenå¼€å‘ç¯å¢ƒã€‚è¯·æŒ‰ç…§å®˜æ–¹è®¾ç½®æŒ‡å—è·å–è¯¦ç»†è¯´æ˜ï¼š

**ğŸ“š ç¯å¢ƒè®¾ç½®æŒ‡å—**ï¼š[TuyaOpenç¯å¢ƒè®¾ç½®](https://www.tuyaopen.ai/zh/docs/quick-start/enviroment-setup)

#### å¿«é€Ÿè®¾ç½®å‘½ä»¤
```bash
# å®‰è£…å¿…éœ€å·¥å…·ï¼ˆUbuntu/Debianï¼‰
sudo apt-get install lcov cmake-curses-gui build-essential ninja-build wget git python3 python3-pip python3-venv libc6-i386 libsystemd-dev

# å…‹éš†TuyaOpenä»“åº“
git clone https://github.com/tuya/TuyaOpen.git
cd TuyaOpen

# æ¿€æ´»tos.pyç¯å¢ƒ
. ./export.sh

# éªŒè¯å®‰è£…
tos.py version
tos.py check
```

# é¡¹ç›®ç¼–è¯‘

**ğŸ“š ç¼–è¯‘æŒ‡å—**ï¼š[TuyaOpené¡¹ç›®ç¼–è¯‘](https://www.tuyaopen.ai/zh/docs/quick-start/project-compilation)

#### æ­¥éª¤1ï¼šå¯¼èˆªåˆ°é¡¹ç›®
```bash
cd examples/peripherals/leds-pixel
```

#### æ­¥éª¤2ï¼šé…ç½®é¡¹ç›®
```bash
# ä¸ºT5AIæ¿é…ç½®
tos.py config choice
# é€‰æ‹©ï¼šT5AI.config
```

#### æ­¥éª¤3ï¼šæ„å»ºé¡¹ç›®
```bash
# æ„å»ºé¡¹ç›®
tos.py build
```

#### æ­¥éª¤4ï¼šæ¸…ç†æ„å»ºï¼ˆå¦‚éœ€è¦ï¼‰
```bash
# æ¸…ç†æ„å»ºç¼“å­˜
tos.py clean

# æ·±åº¦æ¸…ç†
tos.py clean -f
```

### å›ºä»¶çƒ§å½•

**ğŸ“š çƒ§å½•æŒ‡å—**ï¼š[TuyaOpenå›ºä»¶çƒ§å½•](https://www.tuyaopen.ai/zh/docs/quick-start/firmware-burning)

#### å…ˆå†³æ¡ä»¶
- é€šè¿‡USBå°†T5AIæ¿è¿æ¥åˆ°PC
- å¯¹äºLinux/Macç”¨æˆ·ï¼š`sudo usermod -aG dialout $USER`ï¼ˆç„¶åé‡å¯ï¼‰
- å¯¹äºWindowsï¼šå®‰è£…é€‚å½“çš„USBé©±åŠ¨ç¨‹åº

#### çƒ§å½•è¿‡ç¨‹
```bash
# å°†å›ºä»¶çƒ§å½•åˆ°è®¾å¤‡
tos.py flash

# æç¤ºæ—¶é€‰æ‹©æ­£ç¡®çš„ä¸²å£
# T5AIæ¿é€šå¸¸æœ‰ä¸¤ä¸ªç«¯å£ï¼š
# - è¾ƒä½æ•°å­—ï¼šç¼–ç¨‹ç«¯å£
# - è¾ƒé«˜æ•°å­—ï¼šæ—¥å¿—ç«¯å£
```

#### ç›‘æ§è¾“å‡º
```bash
# ç›‘æ§ä¸²å£è¾“å‡ºè¿›è¡Œè°ƒè¯•
tos.py monitor
```

### é…ç½®é€‰é¡¹

## ğŸª é«˜çº§æ•ˆæœå’Œä¿®æ”¹

### åˆ›å»ºè‡ªå®šä¹‰æ•ˆæœ
```c
static void __custom_effect(void)
{
    // æ‚¨çš„è‡ªå®šä¹‰åŠ¨ç”»é€»è¾‘
    // ä½¿ç”¨çŸ©é˜µåæ ‡ç³»
    // åº”ç”¨é¢œè‰²æ•°å­¦
    // åˆ·æ–°æ˜¾ç¤º
}
```

### æ·»åŠ æ–°å­—ç¬¦
```c
// åœ¨led_font.hä¸­æ‰©å±•å­—ä½“æ•°æ®åº“
{'@', {0x00, 0x3C, 0x66, 0x6E, 0x6A, 0x6E, 0x60, 0x3C}, 8},
```

### æ€§èƒ½ä¼˜åŒ–
- **å¸§ç‡**ï¼šè°ƒæ•´`tal_system_sleep()`ä»¥è·å¾—æ‰€éœ€çš„FPS
- **é¢œè‰²æ·±åº¦**ï¼šä¿®æ”¹`COLOR_RESOLUION`ä»¥è·å¾—äº®åº¦çº§åˆ«
- **å†…å­˜ä½¿ç”¨**ï¼šä¼˜åŒ–é™æ€å˜é‡ä»¥æé«˜RAMæ•ˆç‡

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### LEDä¸äº®
- **æ£€æŸ¥ç”µæº**ï¼šç¡®ä¿5Vç”µæºèƒ½å¤Ÿå¤„ç†å…¨è´Ÿè½½
- **æ•°æ®è¿æ¥**ï¼šéªŒè¯SPI0_MISOè¿æ¥
- **æ¥åœ°è¿æ¥**ï¼šç¡®ä¿æ¿å’ŒLEDçŸ©é˜µä¹‹é—´çš„å…¬å…±æ¥åœ°

#### é—ªçƒæˆ–ä¸ç¨³å®šæ˜¾ç¤º
- **ç”µæº**ï¼šç”µæµå®¹é‡ä¸è¶³
- **æ—¶åºé—®é¢˜**ï¼šè°ƒæ•´å¸§å»¶è¿Ÿæ—¶åº
- **ä¿¡å·è´¨é‡**ï¼šæ£€æŸ¥è¿æ¥æ¾åŠ¨

#### é¢œè‰²é—®é¢˜
- **RGBé¡ºåº**ï¼šéªŒè¯`RGB_ORDER`é…ç½®
- **äº®åº¦**ï¼šæ£€æŸ¥`COLOR_RESOLUION`è®¾ç½®
- **é©±åŠ¨é€‰æ‹©**ï¼šç¡®ä¿é€‰æ‹©äº†æ­£ç¡®çš„LEDç±»å‹

---

# ğŸŒŸ é¡¹ç›®æ‰©å±• - ä¸‹ä¸€æ­¥æ„å»ºä»€ä¹ˆï¼Ÿ

### IoTé›†æˆ
- **Tuyaäº‘**ï¼šè¿æ¥åˆ°Tuya IoTå¹³å°
- **è¿œç¨‹æ§åˆ¶**ï¼šé€šè¿‡ç§»åŠ¨åº”ç”¨æ§åˆ¶æ•ˆæœ
- **è°ƒåº¦**ï¼šåŸºäºæ—¶é—´çš„æ•ˆæœåˆ‡æ¢

### é«˜çº§å›¾æ¡ˆ
- **ç”Ÿå‘½æ¸¸æˆ**ï¼šå…ƒèƒè‡ªåŠ¨æœºæ¨¡æ‹Ÿ
- **åˆ†å½¢å›¾æ¡ˆ**ï¼šæ›¼å¾·å¸ƒæ´›ç‰¹é›†å¯è§†åŒ–
- **éŸ³é¢‘å¯è§†åŒ–**ï¼šå®æ—¶éŸ³é¢‘ååº”æ•ˆæœ

### ç¡¬ä»¶å‡çº§
- **æ›´å¤§çŸ©é˜µ**ï¼šæ‰©å±•åˆ°32x32æˆ–64x64
- **å¤šé¢æ¿**ï¼šé“¾æ¥å¤šä¸ªçŸ©é˜µ
- **3Dæ•ˆæœ**ï¼šä½¿ç”¨åˆ†å±‚æ˜¾ç¤ºå™¨å¢åŠ æ·±åº¦

## ğŸ‰ ç»“è®º

æ­å–œï¼æ‚¨å·²ç»æ„å»ºäº†ä¸€ä¸ªä»¤äººéš¾ä»¥ç½®ä¿¡çš„LEDçŸ©é˜µæ˜¾ç¤ºç³»ç»Ÿï¼Œå±•ç¤ºäº†åµŒå…¥å¼ç¼–ç¨‹ã€æ•°å­¦ç®—æ³•å’Œåˆ›æ„å·¥ç¨‹çš„å¼ºå¤§åŠŸèƒ½ã€‚è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†ï¼š

- **é«˜çº§åŠ¨ç”»æŠ€æœ¯**ï¼šä»ç®€å•é¢œè‰²å˜åŒ–åˆ°å¤æ‚æ³¢æµªå›¾æ¡ˆ
- **æ•°å­¦å»ºæ¨¡**ï¼šä½¿ç”¨ä¸‰è§’å‡½æ•°å’Œæ³¢æµªå‡½æ•°å®ç°è§†è§‰æ•ˆæœ
- **ç¡¬ä»¶é›†æˆ**ï¼šå¾®æ§åˆ¶å™¨å’ŒLEDçŸ©é˜µä¹‹é—´çš„æ— ç¼é€šä¿¡
- **åˆ›æ„ç¼–ç¨‹**ï¼šå°†æ•°å­¦æ¦‚å¿µè½¬åŒ–ä¸ºä»¤äººæƒŠå¹çš„è§†è§‰è‰ºæœ¯

### ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ
- å°è¯•æ‚¨è‡ªå·±çš„è‡ªå®šä¹‰æ•ˆæœ
- ä¸IoTå¹³å°é›†æˆä»¥å®ç°è¿œç¨‹æ§åˆ¶
- æ‰©å±•åˆ°æ›´å¤§çš„çŸ©é˜µä»¥è·å¾—æ›´ä»¤äººå°è±¡æ·±åˆ»çš„æ˜¾ç¤º
- ä¸åˆ›å®¢ç¤¾åŒºåˆ†äº«æ‚¨çš„åˆ›ä½œï¼

---

*å¿«ä¹åˆ¶ä½œï¼ğŸŒˆâœ¨*

*ä½¿ç”¨TuyaOpen SDKæ„å»º â¤ï¸*